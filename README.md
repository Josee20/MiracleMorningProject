

# ê°œë°œ ê³µìˆ˜


## ğŸ“… ì´í„°ë ˆì´ì…˜ 1 (9/8 ~ 9/11)
| 9/8(ëª©) | 9/9(ê¸ˆ) | 9/10(í† ) | 9/11(ì¼) | 
| --- | --- | --- | --- | 
|íœ´ì‹| íœ´ì‹  | íœ´ì‹    |    1P íƒ­ë°”(1ì‹œê°„)  | 
|  |  |  | 1P UI(2ì‹œê°„) |
|  |  |  | í—¤ë”ë·°(1ì‹œê°„) |
|  |  |  | ì¢Œì¸¡ìƒë‹¨ì‹œê°„(2ì‹œê°„) |

## ğŸ“… ì´í„°ë ˆì´ì…˜ 2 (9/12 ~ 9/14)
| 9/12(ì›”) | 9/13(í™”) | 9/14(ìˆ˜) |  
| --- | --- | --- | 
| 3P UI + Circular Progress(5ì‹œê°„)   | 3P ë…¸í‹°í”¼ì¼€ì´ì…˜(2ì‹œê°„)    |  4P UI(4ì‹œê°„)   |  
|2P ë²„íŠ¼ ì„ íƒ(2ì‹œê°„) | 2P ì–¼ëŸ¿ + ë°ì´íŠ¸í”¼ì»¤(3ì‹œê°„)| ë°ì´í„° ìŠ¤í‚¤ë§ˆ(2ì‹œê°„)|
|2P ë¯¸ì…˜ í…ìŠ¤íŠ¸í•„ë“œ(1ì‹œê°„) |2P ì˜ˆì™¸ì²˜ë¦¬(1ì‹œê°„)||


## ğŸ“… ì´í„°ë ˆì´ì…˜ 3 (9/15 ~ 9/18)
| 9/15(ëª©) | 9/16(ê¸ˆ) | 9/17(í† ) | 9/18(ì¼) | 
| --- | --- | --- | --- | 
| ìº˜ë¦°ë” í•˜ë‹¨ list(3ì‹œê°„)    | í†µê³„ìˆ˜ì¹˜(3ì‹œê°„)    |  ê°œì¸ì •ë³´ê¸°ëŠ¥(2ì‹œê°„)   |  íœ´ì‹   | 
| 5P UI(3ì‹œê°„)   |  6P + ì„¸ë¶€í•­ëª© UI(3ì‹œê°„)   | ë°±ì—…ê¸°ëŠ¥(4ì‹œê°„)    |  |

## ğŸ“… ì´í„°ë ˆì´ì…˜ 4 (9/19 ~ 9/21)
| 9/19(ì›”) | 9/20(í™”) | 9/21(ìˆ˜) |  
| --- | --- | --- | 
|  ë°©í•´ê¸ˆì§€ëª¨ë“œ(3ì‹œê°„)   | ì—°ì†ì„±ê³µì¼ì— ë§ì¶° ìºë¦­í„°ë³€ê²½(3ì‹œê°„)    | 1P, 3P í™•ì¸(3ì‹œê°„)    |  
| ìºë¦­í„° UI(3ì‹œê°„)| 1P, 2P í™•ì¸(3ì‹œê°„) | 4P í™•ì¸(3ì‹œê°„) |

## ğŸ“… ì´í„°ë ˆì´ì…˜ 5 (9/22 ~ 9/25)
| 9/22(ëª©) | 9/23(ê¸ˆ) | 9/24(í† ) | 9/25(ì¼) | 
| --- | --- | --- | --- | 
|  4P í™•ì¸(3ì‹œê°„)   |  ë°±ì—…í™•ì¸(3ì‹œê°„)   |  ë¦¬íŒ©í† ë§(6ì‹œê°„)  | íœ´ì‹    | 
| 5P í™•ì¸(3ì‹œê°„) | ë°©í•´ê¸ˆì§€ëª¨ë“œ í™•ì¸(1ì‹œê°„) | | |
||6P ë‚˜ë¨¸ì§€í™•ì¸(2ì‹œê°„)|||

## ğŸ“… ì´í„°ë ˆì´ì…˜ 6 (9/26 ~ 9/28)
| 9/26(ì›”) | 9/27(í™”) | 9/28(ìˆ˜) |  
| --- | --- | --- | 
| ë¦¬íŒ©í† ë§(6ì‹œê°„)    |  ë¦¬íŒ©í† ë§(6ì‹œê°„)   |  ë¦¬íŒ©í† ë§(6ì‹œê°„)   |  

## ğŸ“… ì´í„°ë ˆì´ì…˜ 7 (9/29 ~ 10/2)
| 9/29(ëª©) | 9/30(ê¸ˆ) | 10/1(í† ) | 10/2(ì¼) | 
| --- | --- | --- | --- | 
|  ë¦¬íŒ©í† ë§(6ì‹œê°„)   |  ë¦¬íŒ©í† ë§(6ì‹œê°„)   |  ë¦¬íŒ©í† ë§(6ì‹œê°„)   |   ë¦¬íŒ©í† ë§(6ì‹œê°„)  | 

## ğŸ“… ì´í„°ë ˆì´ì…˜ 8 (10/3 ~ 10/5)
| 10/3(ì›”) | 10/4(í™”) | 10/5(ìˆ˜) |  
| --- | --- | --- | 
|   ë¦¬íŒ©í† ë§(6ì‹œê°„)  |  ë¦¬íŒ©í† ë§(6ì‹œê°„)   | ë¦¬íŒ©í† ë§(6ì‹œê°„)    |  

___

# ì‚¬ìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
1. FSCalendar
2. SnapKit
3. RealmSwift


# DBêµ¬ì¡°
![[ìŠ¤í¬ë¦°ìƒ· 2022-09-23 ì˜¤ì „ 10.05.33.png]]
___

# 220911


## 1. ìƒë‹¨ ìƒíƒœë°”(ì‹œê°„, ì™€ì´íŒŒì´, ë°°í„°ë¦¬) ë“± ì§€ìš°ëŠ” ë²•

ìƒë‹¨ ìŠ¤í…Œì´í„°ìŠ¤ ë°”ë¥¼ ì—†ì•  ì¡°ê¸ˆ ê¹”ë”í•œ? UIë¥¼ ì£¼ê³  ì‹¶ì–´ ì§€ì› ë‹¤.

ë…¸ì¹˜ê°€ ìˆëŠ” ê¸°ì¢…ì—ì„  ì•ˆ ì§€ì›Œ ì§€ëŠ” ê²ƒ ê°™ë‹¤.

```swift
override var prefersStatusBarHidden: Bool {
	return true
}
```


## 2. Timer

ì‹œê°„ì„ ë‚˜íƒ€ë‚´ì£¼ëŠ”ë° ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤ê³  ìƒê°í•´ Timerë¥¼ ì‚¬ìš©í–ˆë‹¤.

â ì•„ì§ ì •í™•í•˜ê²Œ ì‹¤ì‹œê°„ ì‹œê°„ìœ¼ë¡œ ë–¨ì–´ì§€ì§€ ì•ŠìŒ(60ì´ˆ ë‹¨ìœ„ë¡œ ì—…ë°ì´íŠ¸)

-> í•´ê²° : timeIntervalì„ 1ë¡œ ë§ì¶°ì£¼ë©´ 1ì´ˆë§ˆë‹¤ ì‹œê°„ì— ë§ì¶° ê°±ì‹ ë˜ê¸° ë•Œë¬¸ì— ì •í™•íˆ ì‹œê°„ì„ ë§ì¶°ì„œ ë„ì›Œì¤„ ìˆ˜ ìˆë‹¤.

```swift
class FirstViewController: BaseViewController {
        
    var timer: Timer?
    
    override func viewDidLoad() {
        super.viewDidLoad()

		// 1ì´ˆ ê°„ê²©ìœ¼ë¡œ getCurrentTime ë©”ì†Œë“œ ì‹¤í–‰
		// ì‹¤ì‹œê°„ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ
        timer = Timer.scheduledTimer(timeInterval: 1, target: self, selector: #selector(getCurrentTime), userInfo: nil, repeats: true)
        
    }
    
    override func viewWillDisappear(_ animated: Bool) {
        super.viewWillDisappear(animated)
        
        timer?.invalidate()
    }
    
    override func configure() {
        getCurrentTime()
    }

	// ë ˆì´ë¸”ì— ì‹œê°„ ë‚˜íƒ€ë‚´ì£¼ëŠ” ë©”ì†Œë“œ
    @objc func getCurrentTime() {
        mainView.presentTimeLabel.text = DateFormatChange.shared.fullDate.string(from: Date())
    }
}
```


## í—¤ë”ë·° ë ˆì´ë¸” ë‹¬ê¸°

```swift
func tableView(_ tableView: UITableView, viewForHeaderInSection section: Int) -> UIView? {

	let headerView = UIView()
	headerView.frame = CGRect(x: 0, y: 0, width: self.view.frame.width, height: 40)

	let titleLabel = UILabel()
	titleLabel.text = "í•  ì¼"
	titleLabel.textColor = .black
	titleLabel.font = .boldSystemFont(ofSize: 20)
	titleLabel.frame = CGRect(x: 0, y: 0, width: headerView.frame.width, height: headerView.frame.height)
	headerView.addSubview(titleLabel)

	return headerView
}
```
___

# 220912


## 1. circular progress view 

- loadviewë¡œ ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ ë·°ê°€ ê²¹ì¹˜ê¸° ë•Œë¬¸ì— ì•ˆ ë¨
- ë•Œë¬¸ì— ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì— ë‚˜ë¨¸ì§€ ë·°ë¥¼ ë„£ì–´ì¤Œ

```swift
// In TimerView
final class TimerView: BaseView {
    
    private enum Const {
        static let progressLineWidth = 10.0
        static let backgroundLineWidth = progressLineWidth - 5.0
        static let startAngle = CGFloat(-Double.pi / 2)
        static let endAngle = CGFloat(3 * Double.pi / 2)
        static let backgroundStrokeColor = UIColor.systemGray.cgColor
        static let progressStrokeColor = UIColor.systemOrange.cgColor
    }
    
    private let backgroundLayer: CAShapeLayer = {
        let layer = CAShapeLayer()
        layer.lineWidth = Const.backgroundLineWidth
        layer.strokeEnd = 1
        layer.fillColor = UIColor.clear.cgColor
        layer.strokeColor = Const.backgroundStrokeColor
        return layer
    }()
    
    private let progressLayer: CAShapeLayer = {
        let layer = CAShapeLayer()
        layer.lineWidth = Const.progressLineWidth
        layer.strokeEnd = 0
        layer.fillColor = UIColor.clear.cgColor
        layer.strokeColor = Const.progressStrokeColor
        return layer
    }()
    
    private var circularPath: UIBezierPath {
        UIBezierPath(
            arcCenter: CGPoint(x: self.frame.size.width / 2, y: self.frame.size.height / 2),
            radius: self.frame.size.width / 2,
            startAngle: Const.startAngle,
            endAngle: Const.endAngle,
            clockwise: true
        )
    }
    
    var backgroundLayerColor: CGColor? {
        get { self.backgroundLayer.strokeColor }
        set { self.backgroundLayer.strokeColor = newValue }
    }
    var progressLayerColor: CGColor? {
        get { self.progressLayer.strokeColor }
        set { self.progressLayer.strokeColor = newValue }
    }
    var lineWidth: CGFloat {
        get { self.backgroundLayer.lineWidth }
        set { self.backgroundLayer.lineWidth = newValue }
    }
    
    required init() {
        super.init(frame: .zero)
        
        self.backgroundColor = .clear
        self.backgroundLayer.path = self.circularPath.cgPath
        self.progressLayer.path = self.circularPath.cgPath
        
        self.layer.addSublayer(self.backgroundLayer)
        self.layer.addSublayer(self.progressLayer)
    }
    
    override func layoutSublayers(of layer: CALayer) {
        super.layoutSublayers(of: layer)
        
        self.backgroundLayer.path = self.circularPath.cgPath
        self.progressLayer.path = self.circularPath.cgPath
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
    
    func start(duration: TimeInterval) {
        self.progressLayer.removeAnimation(forKey: "progress")
        let circularProgressAnimation = CABasicAnimation(keyPath: "strokeEnd")
        circularProgressAnimation.duration = duration
        circularProgressAnimation.toValue = 1.0
        circularProgressAnimation.fillMode = .forwards
        circularProgressAnimation.isRemovedOnCompletion = false
        self.progressLayer.add(circularProgressAnimation, forKey: "progress")
    }
}

// In ViewController
class TimerViewController: BaseViewController {
    
    let timeLabel = UILabel()
    
    var leftTime: Int = 10
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        self.view.backgroundColor = .systemBackground
        self.addTimerView(on: self.timeLabel)
        
        self.timeLabel.textAlignment = .center
        self.timeLabel.font = .boldSystemFont(ofSize: 40)
        
        self.view.addSubview(self.timeLabel)
        self.timeLabel.translatesAutoresizingMaskIntoConstraints = false
        NSLayoutConstraint.activate([
            self.timeLabel.heightAnchor.constraint(equalToConstant: 300),
            self.timeLabel.widthAnchor.constraint(equalToConstant: 300),
            self.timeLabel.centerYAnchor.constraint(equalTo: self.view.centerYAnchor),
            self.timeLabel.centerXAnchor.constraint(equalTo: self.view.centerXAnchor),
        ])
        
        // MARK: íƒ€ì´ë¨¸
        Timer.scheduledTimer(withTimeInterval: 1, repeats: true, block: { (t) in
            
            self.leftTime -= 1
            
            let minute = self.leftTime / 60
            let second = self.leftTime % 60
            
            if self.leftTime > 0 {
                self.timeLabel.text = String(format: "%02d:%02d", minute, second)
            } else {
                self.timeLabel.text = "ë!"
                self.okButton.layer.borderColor = UIColor.systemOrange.cgColor
                self.okButton.backgroundColor = .systemOrange
                self.okButton.isUserInteractionEnabled = true
            }
        })
    }
    
    private func addTimerView(on subview: UIView) {
        let timerView = TimerView()
        subview.addSubview(timerView)
        timerView.translatesAutoresizingMaskIntoConstraints = false
        NSLayoutConstraint.activate([
            timerView.leftAnchor.constraint(equalTo: subview.leftAnchor),
            timerView.rightAnchor.constraint(equalTo: subview.rightAnchor),
            timerView.bottomAnchor.constraint(equalTo: subview.bottomAnchor),
            timerView.topAnchor.constraint(equalTo: subview.topAnchor),
        ])
        timerView.start(duration: Double(leftTime))
    }
}

final class RoundLabel: UILabel {

    override func layoutSubviews() {
        super.layoutSubviews()
        
        self.clipsToBounds = true
        self.layer.cornerRadius = self.bounds.height / 2.0

    }
}
```


## 2. multiple button click and change background color

![[ìŠ¤í¬ë¦°ìƒ· 2022-09-13 ì˜¤ì „ 3.24.57.png | 300]]


### ì¤‘ìš”ì‚¬í•­

1. ë²„íŠ¼ì— íƒœê·¸ ì§€ì •í•´ì£¼ê¸°( íƒœê·¸ëŠ” ìƒì¡´ë²”ìœ„ë¥¼ ë²—ì–´ë‚œë‹¤ê³ í•´ì„œ ì‚¬ë¼ì§€ì§€ ì•ŠìŒ)
2. senderë¡œ ë°›ê¸°

```swift
// load Viewì— íƒœê·¸ì§€ì •(ë·°ë¥¼ ê·¸ë ¤ì•¼ íƒœê·¸?ë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” ê±° ê°™ìŒ)
override func loadView() {
	self.view = mainView

	// ë²„íŠ¼ì— tag ë¶€ì—¬
	let dayButtonArr = [mainView.sundayButton, mainView.mondayButton, mainView.tuesdayButton, mainView.wedensdayButton, mainView.thursdayButton, mainView.fridayButton, mainView.saturdayButton]
	
	for i in 0...6 {
		dayButtonArr[i].tag = i
	}
}

// ê°ê° ë²„íŠ¼ì—ê²Œ addTarget ë¶€ì—¬
override func configure() {
        
	let dayButtonArr = [mainView.sundayButton, mainView.mondayButton, mainView.tuesdayButton, mainView.wedensdayButton, mainView.thursdayButton, mainView.fridayButton, mainView.saturdayButton]
	
	for i in 0..<dayButtonArr.count {
		dayButtonArr[i].addTarget(self, action: #selector(dayButtonClicked), for: .touchUpInside)
	}
}

// sender.tagë¡œ ë°›ì•„ì„œ ë°±ê·¸ë¼ìš´ë“œ ì»¬ëŸ¬ ë³€ê²½
@objc func dayButtonClicked(sender: UIButton) {
	
	let dayButtonArr = [mainView.sundayButton, mainView.mondayButton, mainView.tuesdayButton, mainView.wedensdayButton, mainView.thursdayButton, mainView.fridayButton, mainView.saturdayButton]
	
	if dayButtonArr[sender.tag].backgroundColor == UIColor.gray {
		dayButtonArr[sender.tag].backgroundColor = .orange
	} else if dayButtonArr[sender.tag].backgroundColor == UIColor.orange {
		dayButtonArr[sender.tag].backgroundColor = .gray
	}
}

```

___

# 220913


## 1. Notification

1.  ì²˜ìŒ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì— notificationCenter ì´ˆê¸°í™”(ì‹±ê¸€í†¤ íŒ¨í„´)
2.  requestNotificationAuthorizationìœ¼ë¡œ ì²˜ìŒì— ì•Œë¦¼ ê¶Œí•œ ì„¤ì •

```swift
class FirstViewController: BaseViewController {
    
    let notificationCenter = UNUserNotificationCenter.current()
    
    override func loadView() {
        self.view = mainView
    }
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        requestNotificationAuthorization()
    }
    
    func requestNotificationAuthorization() {

        notificationCenter.requestAuthorization(options: [.alert, .sound]) { success, error in
            if let error = error {
                print(error)
            }
        }
    }
}
```


3. ì•ŒëŒ ë‚˜íƒ€ë‚´ê³  ì‹¶ì€ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì— notificationCenter ë‹¤ì‹œì´ˆê¸°í™”
4. callNotification í•¨ìˆ˜ ë§Œë“¤ì–´ì£¼ê¸°

```swift
class TimerViewController: BaseViewController {
    
    let notificationCenter = UNUserNotificationCenter.current()
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        self.callNotification(time: 1, title: "ë¯¸ì…˜ ì™„ë£Œ!!!", body: "ë‹¤ìŒ ë¯¸ì…˜ë„ ì™„ìˆ˜í•´ì£¼ì„¸ìš”~~\në‹¤ ë§ˆì¹˜ì…¨ë‹¤ë©´ ë‹¹ì‹ ì€ ë©‹ìŸì´!!!")
        
        UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .sound]) { success, error in
            print(error)
        }
    }
    
    func callNotification(time: Double, title: String, body: String) {
        notificationCenter.removeAllPendingNotificationRequests()
        
        let content = UNMutableNotificationContent()
        content.title = title
        content.body = body
        content.sound = .defaultCritical
        content.badge = 2
        
        let trigger = UNTimeIntervalNotificationTrigger(timeInterval: time, repeats: false)
        
        let request = UNNotificationRequest(identifier: "notification", content: content, trigger: trigger)
        
        UNUserNotificationCenter.current().add(request) { error in
            guard let error = error else { return }
            print(error)
        }
    }
}
```



## 2. Alert + DatePicker

1.  UIDatePicker() ì´ˆê¸°í™” í›„ ìŠ¤íƒ€ì¼ ì¡ì•„ì£¼ê¸°
2. UIAlertController ì´ˆê¸°í™” í›„ ì„œë¸Œ ë·°ë¡œ datePicker ë„£ì–´ì£¼ê¸°
3. ë ˆì´ì•„ì›ƒ ì¡ì•„ì£¼ê³  ì–¼ëŸ¿ ì•¡ì…˜ ì¶”ê°€í•´ì£¼ê¸°
4. okë²„íŠ¼ í´ë¦­ì‹œ ì‹œê°„ì„ íƒ ë²„íŠ¼ íƒ€ì´í‹€ í•´ë‹¹ ì‹œê°„ì„ ì„ íƒí•œ ì‹œê°„ìœ¼ë¡œ ë³€ê²½í•´ì£¼ê¸°

```swift
@objc func setStartTimeButtonClicked(sender: UIDatePicker) {
	
	let datePicker = UIDatePicker()
	
	datePicker.datePickerMode = .time
	datePicker.preferredDatePickerStyle = .wheels
	datePicker.locale = NSLocale(localeIdentifier: "ko-KR") as Locale
	
	let alert = UIAlertController(title: "\n\n\n\n\n\n\n\n\n\n\n", message: nil, preferredStyle: .actionSheet)
	
	alert.view.addSubview(datePicker)
	
	datePicker.snp.makeConstraints {
		$0.centerX.equalTo(alert.view)
		$0.top.equalTo(alert.view).offset(8)
	}
	
	let ok = UIAlertAction(title: "í™•ì¸", style: .default) { (action) in
		let dateString = DateFormatChange.shared.dateOfHourAndPM.string(from: datePicker.date)
		self.mainView.setStartTimeButton.setTitle(dateString, for: .normal)
		self.mainView.setStartTimeButton.setTitleColor(.systemBlue, for: .normal)
	}
	
	let cancel = UIAlertAction(title: "ì·¨ì†Œ", style: .cancel, handler: nil)
	
	alert.addAction(ok)
	alert.addAction(cancel)
	
	present(alert, animated: true, completion: nil)
}
```
___

# 220914

## 1. CollectionView

<img width="669" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-14 á„‹á…©á„’á…® 10 38 08" src="https://user-images.githubusercontent.com/92367484/190170742-2e358b39-679b-4686-ad33-57795f224fd2.png">

ì½”ë“œë² ì´ìŠ¤ë¡œ ì»¬ë ‰ì…˜ë·°ë¥¼ í…Œì´ë¸”ë·°ì™€ ê°™ì´ ì¶”ê°€í•´ ì£¼ë ¤ í–ˆìœ¼ë‚˜ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.

ë¬´ìŠ¨ ì´ìœ ì¸ì§€ ì•Œì•„ë³´ë‹ˆ ì»¬ë ‰ì…˜ë·°ëŠ” ë ˆì´ì•„ì›ƒì´ ì—†ì´ ì´ˆê¸°í™”ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.

ì¦‰ collectionViewëŠ” TableViewì™€ ë‹¤ë¥´ê²Œ ë·°ê°ì²´ë¥¼ ë§Œë“¤ê¸°ì „ì— ë ˆì´ì•„ì›ƒì„ ë‹¤ ì§€ì •í•´ì£¼ì–´ì•¼í•œë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ ë§ì´ë‹¤.

```swift
public let collectionView: UICollectionView = {
	let layout = UICollectionViewFlowLayout()
	let space: CGFloat = 4
	let width = UIScreen.main.bounds.width - (space * 7)
	let height = width

	layout.itemSize = CGSize(width: width / 6, height: width / 6)
	layout.scrollDirection = .horizontal
	layout.sectionInset = UIEdgeInsets(top: space, left: space, bottom: space, right: space)
	layout.minimumLineSpacing = space
	layout.minimumInteritemSpacing = space
	
	let view = UICollectionView(frame: .zero, collectionViewLayout: layout)
	
	return view
}()
```



##  2. TableView

ì¶”ê°€í•œ ìŠ¤ì¼€ì¥´ì„ ìœ ì €ê°€ ìº˜ë¦°ë”ì—ì„œ í´ë¦­ ì‹œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸°ìœ„í•´ í…Œì´ë¸” ë·°ë¡œ ì‘ì„±í–ˆë‹¤.

ì•„ì§ì€ UIë§Œ ëœ ìƒíƒœ....


<img width="250" alt="image" src= "https://user-images.githubusercontent.com/92367484/190173335-bc13ec8a-a65e-4b56-9cb8-77e5362b153c.png">


___

# 220915


## 1. Realm 

ìœ ì €ê°€ ë¯¸ì…˜, ìš”ì¼, ì‹œê°„ì„ ì •í•´ì„œ ë“±ë¡í•˜ë©´ ë“±ë¡ì¼ë¶€í„° ì´ë²ˆ ë‹¬ ë§ˆì§€ë§‰ì¼ ê¹Œì§€ ìŠ¤ì¼€ì¥´ì´ ìƒì„±ë  ìˆ˜ ìˆë„ë¡  ë§Œë“¤ê³ ì í–ˆìŠµë‹ˆë‹¤.

ë•Œë¬¸ì— ì»¬ëŸ¼ì— PK, ì‹œì‘ì‹œê°„, ì¢…ë£Œì‹œê°„, Date, ë¯¸ì…˜ì´ë¦„, ìˆ˜í–‰ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ì£¼ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

| PK    | ì‹œì‘ì‹œê°„    |  ì¢…ë£Œì‹œê°„     | Date    |  ë¯¸ì…˜ì´ë¦„  | ìˆ˜í–‰ì—¬ë¶€ |
| --- | --- | --- | ---| --- | --- | 
| abcd1234|10:00 | 11:00| 23:12:22:... | ë°±ì¤€ë¬¸ì œí’€ê¸° | false | 


### 1-1. Object Model ì •ì˜

```swift
import RealmSwift

class UserSchedule: Object {
    @Persisted var startTime: String
    @Persisted var endTime: String
    @Persisted var scheduleDate = Date()
    @Persisted var schedule: String
    @Persisted var scheduleSuccess: Bool
    
    @Persisted(primaryKey: true) var objectID: ObjectId
    
    convenience init(startTime: String, endTime: String, scheduleDate: Date, schedule: String, scheduleSuccess: Bool) {
        self.init()
        self.startTime = startTime
        self.endTime = endTime
        self.scheduleDate = scheduleDate
        self.schedule = schedule
        self.scheduleSuccess = false
    }
}
```



### 1-2. ë‹¤ìŒ ë‚ ë¶€í„° ì´ë²ˆ ë‹¬ ë§ˆì§€ë§‰ì¼ê¹Œì§€ ì„ íƒí•œ  ìš”ì¼ ìŠ¤ì¼€ì¥´ ë“±ë¡

ë§¤ì¼ or ë§¤ì£¼ê°€ ì•„ë‹ˆë¼ í•œ ë‹¬ ë‹¨ìœ„ë¡œ ê³„íšì„ ì„¸ìš°ê³ ì í–ˆìŠµë‹ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì´ë¯¸ ì§€ë‚˜ê°„ ë‚ ì€ ë¹¼ì¤˜ì•¼í–ˆê³  ì•„ì¹¨ì´ê¸° ë•Œë¬¸ì— ë‹¤ìŒ ë‚  ê¸°ì¤€ìœ¼ë¡œ ìŠ¤ì¼€ì¥´ì´ ìƒì„±ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

ì¶”ê°€ì ìœ¼ë¡œ ë‹¬ì´ ë„˜ì–´ê°€ë©´ ìŠ¤ì¼€ì¥´ì´ ë” ì´ìƒ ìƒì„±ë˜ì§€ ì•Šì•„ì•¼ ë˜ëŠ” ê²ƒê³¼ ì„ íƒí•œ ìš”ì¼ë§Œ ì¶”ê°€ ë˜ì–´ì•¼í•œë‹¤ëŠ” ê²ƒì„ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```swift
var now = Date() + 86400 
let calendar = Calendar.current
let weekDayArr = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "]

@objc func okButtonClicked() {
	
	let currentMonth = self.calendar.component(.month, from: now)
		
		while true {
			
			let month = calendar.component(.month, from: now)
			let day = calendar.component(.weekday, from: now) - 1
			
			if currentMonth < month {
				break
			} else if weekDayArr[day] == mainView.sundayButton.titleLabel?.text && mainView.sundayButton.backgroundColor == .lightGray ||
				weekDayArr[day] == mainView.mondayButton.titleLabel?.text && mainView.mondayButton.backgroundColor == .lightGray ||
				weekDayArr[day] == mainView.tuesdayButton.titleLabel?.text && mainView.tuesdayButton.backgroundColor == .lightGray ||
				weekDayArr[day] == mainView.wedensdayButton.titleLabel?.text && mainView.wedensdayButton.backgroundColor == .lightGray ||
				weekDayArr[day] == mainView.thursdayButton.titleLabel?.text && mainView.thursdayButton.backgroundColor == .lightGray ||
				weekDayArr[day] == mainView.fridayButton.titleLabel?.text && mainView.fridayButton.backgroundColor == .lightGray ||
				weekDayArr[day] == mainView.saturdayButton.titleLabel?.text && mainView.saturdayButton.backgroundColor == .lightGray {
				now += 86400
				continue
			} else {
				repository.addSchedule(startTime: mainView.setStartTimeButton.titleLabel?.text ?? "", endTime: mainView.setEndTimeButton.titleLabel?.text ?? "", date: now, schedule: mainView.setScheduleTextField.text!, success: false)
				now += 86400
		}
			
		dismiss(animated: true)
	}
}
```

weekDayArr ë°°ì—´ì„ ë§Œë“¤ì–´ì£¼ê³  calendarë¥¼ ì‚¬ìš©í•´ weekdayë¥¼ ê°€ì ¸ì˜¤ê³ ë‚˜ì„œ - 1ì„ í•´ì£¼ë©´  weekDayArr[day]ëŠ” ì¼ìš”ì¼ì´ ë˜ì–´ ì¸ë±ì‹±ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ ë‚´ì¼ë¶€í„° ë‹¤ìŒ ë‹¬ ì´ì „ê¹Œì§€ì˜ ìš”ì¼ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  ê·¸ ìš”ì¼ì´ ë§Œì•½ ì›”ìš”ì¼ì´ê³  ìƒ‰ê¹”ì´ lightGray ( ì„ íƒì´ ë˜ì§€ ì•Šì€ ë²„íŠ¼)ì´ë©´ ë‹¤ìŒ ë‚ ë¡œ ë„˜ì–´ê°€ê³  continueë¡œ ë¬´ì‹œí•´ì¤˜ ì„ íƒí•˜ì§€ ì•Šì€ ìš”ì¼ì€ ê±´ë„ˆ ë›°ì–´ì§‘ë‹ˆë‹¤.


### 1-3. ë“±ë¡ê°€ëŠ¥ì‹œê°„ ì˜ˆì™¸ì²˜ë¦¬

ì•±ì˜ íŠ¹ì„±ìƒ ì˜¤ì „ì‹œê°„ë§Œ ì„ íƒì´ ê°€ëŠ¥í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ ë§ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

ì˜¤ì „ 4ì‹œë¶€í„° ì˜¤ì „9ì‹œê¹Œì§€ ê·¸ ì•ˆì—ì„œë§Œ ì‹œê°„ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë„ë¡ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```Swfit
let ok = UIAlertAction(title: "í™•ì¸", style: .default) { (action) in
	let dateString = DateFormatChange.shared.dateOfHourAndPM.string(from: datePicker.date)
	
	if self.calendar.component(.hour, from: datePicker.date) > 3 && self.calendar.component(.hour, from: datePicker.date) < 9 {
		self.mainView.setStartTimeButton.setTitle(dateString, for: .normal)
		self.mainView.setStartTimeButton.setTitleColor(.systemBlue, for: .normal)
	} else {
		self.showAlertOnlyOk(title: "ì˜¤ì „ 4ì‹œë¶€í„° ì˜¤ì „9ì‹œê¹Œì§€ë§Œ ì‹œê°„ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤")
	}
}
```

ìº˜ë¦°ë”ë¥¼ ì‚¬ìš©í•´ ë°ì´íŠ¸í”¼ì»¤ì˜ ì‹œê°„ì—ì„œ hourë§Œ ê°€ì ¸ì™€ì„œ ì˜¤ì „ 4ì‹œ ~ ì˜¤ì „9ì‹œ ì‚¬ì´ì˜ ì‹œê°„ë§Œ ë“±ë¡ì´ ê°€ëŠ¥í•˜ê²Œ í–ˆìŠµë‹ˆë‹¤.

___

# 220916


## 1. ìº˜ë¦°ë”ì— ì (ìŠ¤ì¼€ì¥´) ì°ì–´ì£¼ê¸°

```swift
func setEvents() {

	for i in 0..<tasks.count {
		let eventDateString = DateFormatChange.shared.dateOfYearMonthDay.string(from: tasks[i].scheduleDate)
		
		guard let eventDate = DateFormatChange.shared.dateOfYearMonthDay.date(from: eventDateString) else {
			return
		}
		
		events.append(eventDate)
	}
}

extension SecondViewController: FSCalendarDelegate, FSCalendarDataSource, FSCalendarDelegateAppearance {
    
    // ... ê°œìˆ˜
    func calendar(_ calendar: FSCalendar, numberOfEventsFor date: Date) -> Int {
        
        var j = 0
        
        let koreanStringDate = DateFormatChange.shared.dateOfYearMonthDay.string(from: date)
        guard let koreanDate = DateFormatChange.shared.dateOfYearMonthDay.date(from: koreanStringDate) else { return  1 }
        
        if self.events.contains(date) {
            j = 0
            for i in 0..<tasks.count {
                if self.events[i] == date {
                    j += 1
                }
            }
            mainView.calendar.appearance.eventDefaultColor = .systemGray3
            print("++++++++++ \(koreanDate)")
            return j
        } else {
            return 0
        }
    }
}

```

FSCalendarì˜ ë¸ë¦¬ê²Œì´íŠ¸ íŒ¨í„´ì„ ì´ìš©í•˜ë©´ ìº˜ë¦°ë”ì—ì„œ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œëœë‹¤.

ìŠ¤ì¼€ì¥´ì„ ë“±ë¡í•˜ë©´ í•´ë‹¹ ë‚ ì§œ ë°‘ì— ...ì„ ë§Œë“¤ì–´ì£¼ê³  ì‹¶ì—ˆê³  ê·¸ ë©”ì†Œë“œëŠ” `numberOfEventsFor` ë©”ì†Œë“œì—ì„œ ë‹¤ë£° ìˆ˜ ìˆì—ˆë‹¤.

ì´ ë©”ì†Œë“œëŠ” ì´ë²ˆ ë‹¬ì˜ dateê°€ ì°¨ë¡€ëŒ€ë¡œ ëª¨ë‘ ì¶œë ¥ë˜ê²Œí•˜ëŠ” ê¸°ëŠ¥?ì„ ê°€ì§€ê³  ìˆëŠ”ë° í…Œì´ë¸”ë·°ì˜ indexPathì™€ ë¹„ìŠ·í•˜ë‹¤.

ê·¸ë˜ì„œ date ê°’ì„ ì„œë¡œ ë¹„êµí•´ì„œ ìŠ¤ì¼€ì¥´ì´ ìˆìœ¼ë©´ ì¶œë ¥í•´ì¤˜ì•¼í•œë‹¤ê³  ìƒê°í–ˆê³  ê°€ì¥ ë¨¼ì € eventArr ë°°ì—´ì„ ë§Œë“¤ì–´ Realmì˜ ScheduleDateë¥¼ í˜•íƒœì— ë§ì¶° date ë°°ì—´ë¡œ ë§Œë“¤ì–´ ì¤¬ë‹¤.

ë‹¤ìŒ ì´ë¥¼ í™œìš©í•´ ì´ë²¤íŠ¸ë¥¼ ì ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¡œì§ì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°í–ˆë‹¤.

1. í•´ë‹¹ ë‚ ì— ìŠ¤ì¼€ì¥´ì„ ê°€ì§€ê³ ìˆëŠ”ì§€ ì—†ëŠ”ì§€
2. ë§Œì•½ ìˆë‹¤ë©´ ëª‡ ê°œë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€
3. ìŠ¤ì¼€ì¥´ ê°œìˆ˜ ë§Œí¼ ë¦¬í„´í•´ì„œ ì  ì°ì–´ì£¼ê¸°

containìœ¼ë¡œ í™•ì¸í•´ì£¼ê³  ë³€ìˆ˜ jë¥¼ í™œìš©í•´ ìŠ¤ì¼€ì¥´ ê°œìˆ˜ë§Œí¼ ë¦¬í„´í•´ì¤„ ìˆ˜ ìˆë„ë¡í–ˆë‹¤.



## 1-2 â ë¬¸ì œë°œìƒ â

ì•±ì„ ê»ë‹¤í‚¤ë©´ ì œëŒ€ë¡œ ...ì´ ë‚ ì§œì— ë§ì¶”ì–´ ì¸ì‹ë˜ì§€ë§Œ ìŠ¤ì¼€ì¥´ ë“±ë¡ í›„ ìº˜ë¦°ë”ì— ë“¤ì–´ê°€ë©´ ì œëŒ€ë¡œ ...ì´ ì•ˆì°íˆëŠ” í˜„ìƒì¼ ë°œìƒí–ˆë‹¤.

ìµœì´ˆì— ìŠ¤ì¼€ì¥´ ë“±ë¡ì‹œì—” ì˜ ë“±ë¡ì´ ë˜ì§€ë§Œ ë‘ ë²ˆì§¸ ë¶€í„´ ë°€ë¦¬ê¸° ì‹œì‘í•œë‹¤...

<img width="500" alt="ìŠ¤í¬ë¦°ìƒ· 2022-09-17 ì˜¤í›„ 4 06 21" src="https://user-images.githubusercontent.com/92367484/190851697-a11b02dd-911a-4caa-9a1c-e039160db9c9.png">

ì–´ì§¸ì„œì¸ì§€ 22ì¼ 23ì¼ì— ..ì´ ë“±ë¡ë˜ì§€ ì•Šê³  27, 28ì¼ë¡œ ë„˜ì–´ê°€ ë²„ë ¸ë‹¤... ê·¸ëŸ°ë° ì•±ì„ ê»ë‹¤í‚¤ë©´ ì œëŒ€ë¡œ ì¸ì‹ì´ ë˜ì–´ ë‚˜íƒ€ë‚œë‹¤...

<img width="500" alt="ìŠ¤í¬ë¦°ìƒ· 2022-09-17 ì˜¤í›„ 4 08 28" src="https://user-images.githubusercontent.com/92367484/190851726-e3d31b21-b6bc-462f-8de7-3d85d279c391.png">


```swift
override func viewWillAppear(_ animated: Bool) {
	super.viewWillAppear(animated)
	
	// ë°˜ë“œì‹œ fetchë¥¼ í•´ì£¼ê³  setEventsë¥¼ ì‹¤í–‰ì‹œì¼œ í•´ì£¼ì–´ì•¼í•¨
	// ê·¸ë˜ì•¼ Realmì—ì„œ tasks.countë¥¼ ë§ì¶° setEventsë©”ì†Œë“œë¥¼ ì“¸ ìˆ˜ ìˆìŒ
	
	fetchRealm()
	setEvents()
	
	mainView.calendar.reloadData()
	print(eventArr)
}


func setEvents() -> [Date] {

	for i in 0..<tasks.count {
		let eventDateString = DateFormatChange.shared.dateOfYearMonthDay.string(from: tasks[i].scheduleDate
			
		guard let eventDate = DateFormatChange.shared.dateOfYearMonthDay.date(from: eventDateString) else {
			return [Date()]
		}
		
		eventArr.append(eventDate)
	}
	
	return eventArr
}

extension SecondViewController: FSCalendarDelegate, FSCalendarDataSource, FSCalendarDelegateAppearance {
    
    // ... ê°œìˆ˜
    func calendar(_ calendar: FSCalendar, numberOfEventsFor date: Date) -> Int {
        
        var j = 0
        
        if self.eventArr.contains(date) {
            j = 0
            for i in 0..<tasks.count {
                if self.eventArr[i] == date {
                    j += 1
                }
            }
            mainView.calendar.appearance.eventDefaultColor = .systemGray3
            return j
        } else {
            return 0
        }
    }
}
```


í•˜ë‚˜ì”© ì°ì–´ë³´ë‹ˆ ì´ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ê³  ìˆì—ˆë‹¤.

<img width="900" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-17 á„‹á…©á„’á…® 6 35 01" src="https://user-images.githubusercontent.com/92367484/190851625-e3b56b72-3780-4564-8699-d78cb64902a8.png">

viewWillAppear ì‹œì ì— `setEvents()` ë¥¼ í•´ì£¼ë‹ˆ ë·°ê°€ ë‚˜ì˜¬ ë•Œ ë§ˆë‹¤ `setEvents()`ê°€ ì‹¤í–‰ë˜ì—ˆê³  ë•Œë¬¸ì— eventArrì˜ ì¸ë±ìŠ¤ê°’ì´ ê¼¬ì´ê²Œë˜ì–´ ... ì´ ì œëŒ€ë¡œ ì°íˆì§€ ì•Šì€ ê²ƒì´ë‹¤.

ê·¸ë ‡ë‹¤ê³  setEvents()ì˜ ì‹œì ì„ ë°”ê¾¸ìë‹ˆ fetch ì‹œì ê³¼ ì–´ê¸‹ë‚˜ì„œ tasks.countì™€ì˜ í¬ê¸°ê°€ ì•ˆ ë§ê²Œë˜ì–´ë²„ë¦°ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì‹œì ìœ¼ë¡œ í•´ê²°í•  ë¬¸ì œëŠ” ì¼ë‹¨ ì•„ë‹ˆë‹¤.

ë‹¤ìŒìœ¼ë¡œ ì‹œë„í•´ë³¸ ê²ƒì€ ë°”ë³´ê°™ì§€ë§Œ ê·¸ëŸ¼ `setEvents()` ì— ì¡°ê±´ì„ ì£¼ì–´ ìƒˆë¡œ ê°’ì´ ì¶”ê°€ë  ë•Œë§Œ ì‹¤í–‰ë˜ê²Œí•˜ë©´ ì–´ë–¨ê¹Œ í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ì£¼ì—ˆë‹¤.

```swift
override func viewWillAppear(_ animated: Bool) {
	super.viewWillAppear(animated)
	
	fetchRealm()

	if tasks.count > eventArr {
		setEvents()
	}
	
	mainView.calendar.reloadData()
	print(eventArr)
}
```

ì´ë ‡ê²Œí•˜ë©´ ë¶„ëª… ë·°ê°€ ë‚˜ì˜¬ ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ tasksì— ì´ë²¤íŠ¸ê°€ ì—…ë°ì´íŠ¸ ë˜ì–´ `tasks.count`ê°€ `eventArr`ì˜ í¬ê¸°ë³´ë‹¤ ì»¤ì•¼ `setEvents()`ê°€ ì‹¤í–‰ ë˜ê²Œ ë  ê²ƒì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ê³  ë·°ë¥¼ ë„ìš°ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

ìƒˆë¡œìš´ ê°’ë§Œ ì¶”ê°€ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ ê¸°ì¡´ê°’ + ìƒˆë¡œìš´ ê°’ì´ `eventArr`ì— ì¶”ê°€ëœë‹¤.

ì™œëƒí•˜ë©´ `tasks`ê°€ `eventArr`ë³´ë‹¤ í´ ë•Œë§Œ `setEvents()`ë¥¼ ì‹¤í–‰í•˜ë¼ê³  í–ˆì§€ ì¤‘ë³µëœ ê°’ì€ ë¹¼ë¼ê³  í•œê²Œ ì•„ë‹ˆë‹ˆê¹....

ì¤‘ë³µ???? ê·¸ëŸ¬ë©´ ë°°ì—´ì—ì„œ ì¤‘ë³µëœ ê°’ì„ ì—†ì• ì£¼ëŠ” <span style="color:red">Set</span> ì„ ì‚¬ìš©í•˜ë©´ ì–´ë–¨ê¹Œ???


## 1-3 ì˜¤ë¥˜í•´ê²° (feat. Set)

ê²°êµ­ ë¬¸ì œëŠ” ì¤‘ë³µëœ ê°’ì´ ë“±ë¡ë˜ê¸° ë•Œë¬¸ì´ì—ˆë‹¤. 

ê·¸ë ‡ë‹¤ë©´ ìš°ë¦¬ëŠ” ì¤‘ë³µëœ ê°’ì„ ì—†ì• ì£¼ëŠ” Setì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ì´ê±¸ ì˜ ì‚¬ìš©í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆì„ê±°ë¼ ìƒê°í–ˆë‹¤.

```swift
class SecondViewController: BaseViewController {
    
    var eventArr = Set<Date>()
    
    func setEvents() {

        for i in 0..<tasks.count {
            let eventDate = tasks[i].scheduleDate
            eventArr.insert(eventDate)
        }
    }
    
}

extension SecondViewController: FSCalendarDelegate, FSCalendarDataSource, FSCalendarDelegateAppearance {
    
    // ... ê°œìˆ˜
    func calendar(_ calendar: FSCalendar, numberOfEventsFor date: Date) -> Int {
        
        var j = 0
        
        let tempArr = eventArr.map { DateFormatChange.shared.dateOfYearMonthDay.string(from: $0) }
        let tempArr2 = tempArr.map { DateFormatChange.shared.dateOfYearMonthDay.date(from: $0) }
        
        if tempArr2.contains(date) {
            j = 0
            for i in 0..<tasks.count {
                if tempArr2[i] == date {
                    j += 1
                }
            }
            mainView.calendar.appearance.eventDefaultColor = .systemGray3
            return j
        } else {
            return 0
        }
    }
}
```


1.  eventArrì„ Array -> Setìœ¼ë¡œ ë³€ê²½

2.   ê¸°ì¡´ eventArrì— yyyy-MM-dd í˜•íƒœë¡œ Dateê°’ì„ ë³€í™˜ì‹œì¼œ ë‹´ì•˜ì§€ë§Œ ê·¸ëƒ¥ Realmì˜ scheduleDateë¥¼ ê·¸ëŒ€ë¡œ ë‹´ìŒ
	- ë§Œì•½ ë³€í™˜ì‹œì¼œì„œ ë‹´ìœ¼ë©´ day ë‹¨ìœ„ë¡œ ì¤‘ë³µëœê²Œ ë‹¤ ì—†ì–´ì§€ê¸° ë•Œë¬¸ì— ìŠ¤ì¼€ì¥´ ë“±ë¡ì´ ì œëŒ€ë¡œ ì•ˆì´ë£¨ì–´ì§ˆ ê²ƒì„
	- ë•Œë¬¸ì— ì´ˆê¹Œì§€ ë‚˜ì˜¤ëŠ” ScheduleDateê·¸ëŒ€ë¡œì˜ ê°’ì„ ë‹´ìŒ

3. numberOfEventsForì—ì„œ í˜•ë³€í™˜ì„ ì‹œì¼œì£¼ê³  ë¹„êµí›„ì— ... ì˜ ê°œìˆ˜ë¥¼ ë¦¬í„´ì‹œì¼œì¤Œ


ì´ì™€ ê°™ì´ ë§Œë“¤ì–´ì£¼ë©´ viewWillAppear í•  ë•Œë§ˆë‹¤ Setì´ê¸° ë•Œë¬¸ì— ì¤‘ë³µëœ ê°’ì´ ì¶”ê°€ë˜ì§€ ì•Šì•„ tasksì— ìˆëŠ” scheduleDateë¥¼ ê·¸ëŒ€ë¡œ  eventArrì— ë‹´ì„ ìˆ˜ ìˆê²Œëœë‹¤.

ê·¸ëŸ¬ë©´ ì¸ë±ì‹±ì„ í•˜ëŠ”ë° ë¬¸ì œê°€ ì—†ê¸° ë•Œë¬¸ì— ì œëŒ€ë¡œ ë‹¬ë ¥ì— ... ì´ ì°íˆê²Œ ëœë‹¤.

ì²˜ìŒì— ë¶„ëª… ê»ë‹¤í‚¤ë©´ ì œëŒ€ë¡œ ... ì´ ì°í˜”ë‹¤ê³  í–ˆëŠ”ë° ì™œëƒí•˜ë©´ ê»ë‹¤í‚¤ê³  ì²˜ìŒìœ¼ë¡œ í™”ë©´ì„ ë„ìš°ë©´ setEvents()ê°€ í•œ ë²ˆë°–ì— ì‹¤í–‰ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì œëŒ€ë¡œ ì¸ë±ì‹±ì´ ë˜ì–´ìˆì–´ ...ì´ ì œëŒ€ë¡œ ë‚˜íƒ€ë‚œ ê²ƒì´ì˜€ë‹¤.

ê·¸ë¦¬ê³  ìŠ¤ì¼€ì¥´ì„ ì¶”ê°€í•˜ê³  ì˜¤ë©´ viewWillAppearì— ì˜í•´ setEvents()ê°€ ì‹¤í–‰ë˜ê³  eventArrì— ì¤‘ë³µëœê°’ë“¤ì´ ì¶”ê°€ë˜ì–´ ì œëŒ€ë¡œ ë‚˜íƒ€ë‚˜ì§€ ì•Šì€ ê²ƒì´ì—ˆë‹¤.


___

# 220917


## 1. ìº˜ë¦°ë” ë‚ ì§œ ì„ íƒì‹œ ìŠ¤ì¼€ì¥´ í…Œì´ë¸”ë·°ì— ë„ì›Œì£¼ê¸°

2Pageì˜ í…Œì´ë¸”ë·°ì…€ì— ìº˜ë¦°ë”ì—ì„œ ì„ íƒí•œ ë‚ ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë‚˜íƒ€ë‚´ê³ ì í–ˆë‹¤.

ë¨¼ì € í´ë¦­í•˜ë©´ í•´ë‹¹ ë‚ ì§œì™€ ì¼ì¹˜í•œ ìŠ¤ì¼€ì¥´ì´ ì˜ ì¶œë ¥ë˜ëŠ” ì§€ í™•ì¸ í–ˆë‹¤.

ê·¸ëŸ°ë° ì¶œë ¥ì´ ì˜ ë˜ì§€ ì•Šì•˜ë‹¤...


### 1-1. ë¬¸ì œë°œìƒ(ì¸ë±ì‹±?)

ë°˜ë³µë¬¸ì„ í†µí•´ tasks.countë§Œí¼ ë°˜ë³µí•´ì£¼ê³  ê±°ê¸°ì—ì„œ ì„ íƒí•œ ë‚ ì§œì™€ í˜•ë³€í™˜ ì‹œì¼œì¤€ ë‚ ì§œê°€ ê°™ìœ¼ë©´ í•´ë‹¹ ì¸ë±ìŠ¤ì˜ tasksë¥¼ ë³´ì—¬ì£¼ë©´ ë˜ëŠ”ì‹ìœ¼ë¡œ í•˜ë©´ ê°„ë‹¨í•˜ê²Œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆì„ê±°ë¼ ìƒê°í–ˆë‹¤.

```swift
func calendar(_ calendar: FSCalendar, didSelect date: Date, at monthPosition: FSCalendarMonthPosition) {
	
	let eventStringArr = eventArr.map { DateFormatChange.shared.dateOfYearMonthDay.string(from: $0) }
	let eventDateArr = eventStringArr.map { DateFormatChange.shared.dateOfYearMonthDay.date(from: $0) }
	
	for i in tasks.count {
		if eventDateArr[i] == date {
			dayEventArr.append(tasks[i].scheduleDate)
		}
	}
	
	mainView.tableView.reloadData()
}
```

ìœ„ ë©”ì†Œë“œëŠ” fscalendarì—ì„œ ì§€ì›í•˜ëŠ” ë©”ì†Œë“œë¡œ ìº˜ë¦°ë”ì˜ ë‚ ì§œë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ë‚ ì˜ dateì™€ monthPosition(ì¸ë±ìŠ¤)ë¥¼ ë°˜í™˜í•´ì¤€ë‹¤.

ì´ë ‡ê²Œ í•˜ë©´ ë¶„ëª… ì¸ë±ìŠ¤ì— ë§ì¶° ì˜ scheduleì„ ë±‰ì–´ë‚¼ê±°ë¼ê³  ìƒê°í•œ ë‚´ê°€ ë°”ë³´ì˜€ë‹¤...

ì™œëƒí•˜ë©´ `eventDateArr[i]` ê°€ ì„ íƒí•œ dateì™€ ê°™ì„ ë•Œì˜ ì¸ë±ìŠ¤ iê°’ì´ tasksì˜ ì¸ë±ìŠ¤ë¡œ ì“°ì´ê²Œë˜ëŠ”ë° ê·¸ëŸ´ ê²½ìš° í•´ë‹¹ë‚ ì§œì™€ ë¬´ì¡°ê±´ ê°™ì€ ìŠ¤ì¼€ì¥´ì´ ë‚˜ì˜¬ ìˆ˜ ì—†ê²Œëœë‹¤.

ì™œëƒí•˜ë©´ í˜„ì¬ tasksì˜ êµ¬ì¡°ëŠ” ì´ëŸ¬í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

<img width="300" alt="ìŠ¤í¬ë¦°ìƒ· 2022-09-18 ì˜¤í›„ 12 31 21" src="https://user-images.githubusercontent.com/92367484/190884938-7e81cd28-c61a-4439-98af-32a6418202a4.png">


ë‚ ì§œì— ë§ì¶° ì •ë ¬ì´ë˜ì–´ìˆìœ¼ë©´ ê°€ëŠ¥í•  ê±° ê°™ì•˜ì§€ë§Œ ë°ì´í„°ë¥¼ ë„£ì„ ë•Œ ë°˜ë³µë¬¸ìœ¼ë¡œ ë„£ì–´ì„œ ê·¸ëŸ°ì§€ fetchë¥¼ ë¶ˆëŸ¬ì¤˜ë„ ì •ë ¬ì´ ê³„ì† ì•ˆ ë˜ì—ˆë‹¤...

ë‘ ê°€ì§€ ìƒê°ì„ í–ˆì—ˆë‹¤.

1. Realmì„ ì–´ë–»ê²Œë“  ë‹¤ì‹œ Dateë¡œ ì •ë ¬í•´ì£¼ê³  ìœ„ì˜ ë°˜ë³µë¬¸ì„ í†µí•´ ë‚˜íƒ€ë‚¸ë‹¤.
2. Realmì—ì„œ filter?ë¥¼ í†µí•´ ê°€ì ¸ì™€ì„œ ë³´ì—¬ì¤€ë‹¤.



### 1-2. ë¬¸ì œ í•´ê²°( feat. where )

ë” ì¢‹ì€ ë°©ë²•ì´ ë­˜ê¹Œ ê³ ë¯¼í•˜ë‹¤ê°€ ë©˜í† ë‹˜ì„ ì°¾ì•„ê°€ ì¡°ì–¸ì„ êµ¬í•˜ë‹ˆ ë°˜ë³µë¬¸ì„ ìì œí•˜ê³  ì¿¼ë¦¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ì‹ìœ¼ë¡œ í•˜ë¼ëŠ” ì†”ë£¨ì…˜ì„ ë°›ì•˜ë‹¤.

ê·¸ë¦¬ê³  Realmì—ì„œ whereì´ë¼ëŠ” ì¢‹ì€ ê¸°ëŠ¥?ì„ ë°œê²¬í–ˆë‹¤.

ì°¸ê³ ë¡œ whereì€ ì›ë˜ Realmì—ì„œ ì§€ì›ì„ í•˜ì§€ ì•Šì•˜ì§€ë§Œ ìµœê·¼ì— ë“¤ì–´ì„œ ì§€ì›í•œ ë¬¸ë²•ì´ë¼ê³  í•œë‹¤!!!

whereì„ ì‚¬ìš©í•´ ì„ íƒí•œ date ê°’ì´ í•´ë‹¹ ë‚ ì˜ 00:00AM ~ 23:59PM ì‚¬ì´ì— ìˆëŠ” ê°’ì„ ë‚˜íƒ€ë‚´ë©´ ë˜ê² ë‹¤ ìƒê°í–ˆë‹¤.

```swift 
class UserScheduleRepository: UserScheduleRepositoryType {
    
    let localRealm = try! Realm()
    
    let calendar = Calendar.current
        
    func dateArr(date: Date) -> Results<UserSchedule> {
        
        return localRealm.objects(UserSchedule.self).where {
            $0.scheduleDate >= calendar.startOfDay(for: date) && $0.scheduleDate < calendar.startOfDay(for: date + 86400)
        }
    }
}
```

`calnedar.startOfDay(for:_)` ë©”ì†Œë“œëŠ” í•´ë‹¹ ë‚ ì˜ 00:00AMì„ ë‚˜íƒ€ë‚´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.

ë•Œë¬¸ì— ì´ê±°ë³´ë‹¤ dateê°’ì´ í¬ê±°ë‚˜ ê°™ê³   `calendar.startOfDay(for: date + 86400)`ëŠ” ë‹¤ìŒ ë‚  00:00AMì´ë‹ˆê¹Œ ê·¸ê²ƒë³´ë‹¤ ì‘ìœ¼ë©´ 00:00AM ~ 23:59PMì˜ ë²”ìœ„ë¥¼ íŠ¹ì •í•  ìˆ˜ ìˆ ê²Œëœë‹¤.

ê·¸ëŸ¬ë©´ í´ë¦­í•œ ë‚ ì˜ date ê°’ì„ ë°›ì•„ Realmì—ì„œ ê·¸ ë‚ ì˜ schedule, startTime, endTime ë“±ë“±ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆê²Œë˜ëŠ” ê²ƒì´ë‹¤.

ê·¸ë¦¬ê³  ë‚˜ì„œ ìº˜ë¦°ë”ì— ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ë©´

```swift
func calendar(_ calendar: FSCalendar, didSelect date: Date, at monthPosition: FSCalendarMonthPosition) {
	
	// ë‹¤ì‹œ í´ë¦­í•˜ë©´ ë°°ì—´ì„ ë¹„ì›Œì¤˜ì•¼í•¨(appendê°€ ê³„ì†ë˜ê¸° ë•Œë¬¸)
	dayEventArr = []
	
	for i in 0..<repository.dateArr(date: date).count {
		dayEventArr.append(repository.dateArr(date: date)[i].schedule)
	}
	
	mainView.tableView.reloadData()

}
```

í´ë¦­ì‹œì— dayEventArr ë°°ì—´ì— í•´ë‹¹ ìŠ¤ì¼€ì¥´ì„ ë‹´ì•„ì£¼ê²Œ ëœë‹¤.

ì´ë¥¼ ê·¸ëŒ€ë¡œ í…Œì´ë¸”ë·° ì…€ì— ë¿Œë ¤ì£¼ë©´ ë°ì´í„°ë¥¼ ì œëŒ€ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.


___

# 220919

## 0. ê°œì¸í”¼ë“œë°±

- ìº˜ë¦°ë”ì— ìŠ¤ì¼€ì¥´ ìˆ˜í–‰í•˜ë©´ ìƒ‰ í‘œì‹œ
- ì‚­ì œ ê¸°ëŠ¥(í…Œì´ë¸”ë·°) -> ì–¸ì œ ì–´ë–»ê²Œ ì–¼ë§ˆë‚˜ ì§€ìš¸ì§€ ìƒê°í•´ë³´ê¸°
- ê²¹ì¹˜ëŠ” ì‹œê°„ ë“±ë¡ X
- ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì—ì„œ ì²´í¬
- í¼ì¦ˆê¸°ëŠ¥
- ì´ë¯¸ ì‹œê°„ì´ ì§€ë‚¬ìœ¼ë©´ ì…€ ì‚­ì œ ë¶ˆê°€í•˜ê²Œ


## 1. íŒ€ë¹Œë”©

tableViewDelegate, tableViewDataSource ì¦‰ ë¸ë¦¬ê²Œì´íŠ¸íŒ¨í„´ ìª½ì€ ìµœëŒ€í•œ ê°€ë³ê²Œ ì²˜ë¦¬í•˜ëŠ”ê²Œ ì¢‹ë‹¤.

ì™œëƒí•˜ë©´ ë·°ë¥¼ ê·¸ë¦´ ë•Œ cellForRowAt ê°™ì€ ê²½ìš° rowê°€ í•˜ë‚˜ ìƒê¸¸ ë•Œë§ˆë‹¤ ì•ˆì—ìˆëŠ” ì½”ë“œë“¤ì„ ë°˜ë³µí•˜ê¸° ë•Œë¬¸ì´ë‹¤.


### 1-1. ë‚´ê°€ ë§‰íŒ ë¶€ë¶„

ì»¬ë ‰ì…˜ë·°ë¥¼ ì‚¬ìš©í•´ ì´ë²ˆ ë‹¬ ì´ ìˆ˜í–‰í•œ ìŠ¤ì¼€ì¥´ì˜ ê°œìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ê³  ì‹¶ì–´ì„œ ìˆ˜í–‰í•œ ìŠ¤ì¼€ì¥´(true)ì¸ ë¶€ë¶„ì„ í•„í„°ë¡œ ê°€ì ¸ì™€ ë°°ì—´ì— ë‹´ê³  ë”•ì…”ë„ˆë¦¬ë¡œ ì²˜ë¦¬í•˜ê³ ìí–ˆëŠ”ë° ê°’ì´ ì¤‘ë³µëœ ë¶€ë¶„ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì¤˜ì•¼í• ì§€ ëª¨ë¥´ê² ë‹¤.

-> reduceë¥¼ í™œìš©í•´ë³´ë¼ëŠ” í”¼ë“œë°±ì„ ë°›ìŒ


## 2. Collection Viewì— ë°ì´í„° ë„ì›Œì£¼ê¸°

<img width="300" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-19 á„‹á…©á„’á…® 3 04 44" src="https://user-images.githubusercontent.com/92367484/190958044-d3af8d8d-e293-46dd-87ee-4879d8f7a702.png">

ë‹¤ìŒê³¼ ê°™ì´ ì»¬ë ‰ì…˜ ë·°ì— ìŠ¤ì¼€ì¥´ê³¼ ìˆ˜í–‰íšŸìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ì£¼ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.

ìˆ˜í–‰í•œ ìŠ¤ì¼€ì¥´ì´ê¸° ë•Œë¬¸ì— ê°€ì¥ë¨¼ì € Realmì—ì„œ Successì—¬ë¶€ê°€ trueì¸ ê²ƒì„ í•„í„°í•´ì„œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.

```swift
func successSchedule() -> Results<UserSchedule> {
	return localRealm.objects(UserSchedule.self).filter("scheduleSuccess == true")
}
```

ì´ë ‡ê²Œí•˜ë©´ `["ìš´ë™", "ìš´ë™","ìš´ë™", "ê³µë¶€", "ê³µë¶€", "ë…ì„œ"]` ì´ëŸ°ì‹ìœ¼ë¡œ ë°°ì—´ì— ë‹´ì„ ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ìŠ¤ì¼€ì¥´, íšŸìˆ˜ê°€ ì§ì§€ì–´ì ¸ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ë‚˜íƒ€ë‚´ê³ ìí–ˆìŠµë‹ˆë‹¤.


### 2-1. âë¬¸ì œë°œìƒâ

ë°˜ë³µë¬¸ì„ í†µí•´ ìŠ¤ì¼€ì¥´ì„ ë‹´ì•˜ê¸° ë•Œë¬¸ì— ìŠ¤ì¼€ì¥´ë“¤ì´ ì„œë¡œ ì„ì¼ ìˆ˜ê°€ ì—†ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

ë•Œë¬¸ì— ë°˜ë³µë¬¸ì„ í†µí•´ ì•ì˜ ì¸ë±ìŠ¤ì™€ í˜„ì¬ ì¸ë±ìŠ¤ë¥¼ ë¹„êµí•œ í›„ ê°™ìœ¼ë©´ valueë¥¼ 1ì”© ì¶”ê°€í•´ì£¼ëŠ” ì‹ìœ¼ë¡œ ë”•ì…”ë„ˆë¦¬ë¥¼ ë‚˜íƒ€ë‚´ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤.

```swift
var j = 1

for i in 0..<repository.successSchedule().count {
	if tempArr[i] == tempArr[i+1] {
		j += 1
	} else {
		scheduleCountDic.updateValue(j, forKey: repository.successSchedule()[i].schedule)
	}
}
```

ì´ëŸ°ì‹ìœ¼ë¡œ ì ‘ê·¼ì„ í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œí•˜ë©´ í•´ë‹¹ë°°ì—´ì˜ í¬ê¸°ë³´ë‹¤ +1 ë” í° ê²½ìš°ì™€ ë¹„êµí•´ì•¼í•˜ëŠ”ë° ê·¸ë ‡ê²Œë˜ë©´ index out of range ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤...

ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ë°˜ë³µë¬¸ì„ í†µí•´ ì ‘ê·¼í•˜ëŠ”ê²Œ ë³„ë¡œ ë°”ëŒì§í•œ ìƒê°ì´ ì•„ë‹ˆë¼ê³  ë“¤ì—ˆìŠµë‹ˆë‹¤... ( ì¿¼ë¦¬ì—ì„œ ê°€ì ¸ì˜¤ë¼ëŠ” ë©˜í† ë‹˜ì˜ ì¡°ì–¸ì´... ë– ì˜¬ëìŠµë‹ˆë‹¤!!!)


### 2-2. âœ… ë¬¸ì œí•´ê²°

```swift
for i in 0..<repository.successSchedule().count {
	scheduleCountDic.updateValue(i+1, forKey: repository.successSchedule()[i].schedule)
	print(repository.successSchedule()[i].schedule)
}

// ["ê°•ì•„ì§€", "ê°•ì•„ì§€", "ê°•ì•„ì§€", "ê³ ì–‘ì´", "ì•…ì–´", "ì•…ì–´"]
// ["ê°•ì•„ì§€":3, "ê³ ì–‘ì´":4, "ì•…ì–´":6] ìœ¼ë¡œ ë”•ì…”ë„ˆë¦¬ê°€ ì—…ë°ì´íŠ¸ë¨
```

ìœ„ì˜ ì½”ë“œë¥¼ í™œìš©í•´ì„œ ì–´ë–»ê²Œ í•´ê²°í•´ë³´ìëŠ” ì–´ë¦¬ì„ì€... ìƒê°ì„ ê³„ì†í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

ëŒ€ì…ì€ ë˜ì§€ë§Œ ë°°ì—´ì˜ ì•„ì´í…œ ê°œìˆ˜ì— ë§ì¶° valueê°€ ì—…ë°ì´íŠ¸ ë˜ì§€ ì•Šì§€ë§Œ ì–´ë–»ê²Œ ì†ì„ ë³´ë©´ ì œëŒ€ë¡œ ë„£ì„ ìˆ˜ ìˆì„ê±°ë¼ ìƒê°í–ˆê¸° ë•Œë¬¸ì—...

ì´ ë• Realmì— í•„í„°ë¥¼ ê±°ëŠ”ë°ëŠ” ë¬´ì¡°ê±´ ìƒìˆ˜??ë§Œ ë  ê±°ë¼ê³  ìƒê°ì„ í–ˆìŠµë‹ˆë‹¤...(ì™œì§€?...) ë‹¤ filterì²˜ë¦¬ë¥¼ " "ì•ˆì—ì„œë§Œ í•´ì¤˜ì„œ ê·¸ë¬ë‚˜ë´ìš” ã… ã… 

í•˜ì§€ë§Œ filterì—ë„ ë§¤ê°œë³€ìˆ˜ë¥¼ ë„£ì–´ í•´ë‹¹ ê°’ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ë¥¼ íŒ€ì›ì—ê²Œ ë“¤ì—ˆìŠµë‹ˆë‹¤...

ê·¸ëŸ¬ë©´ í•´ë‹¹ìŠ¤ì¼€ì¥´ì˜ í‚¤ê°’ê³¼ í‚¤ì—ë§ëŠ” valueë¥¼ ì¿¼ë¦¬ì—ì„œ í•„í„°ë¥¼ í†µí•´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ì£ ...

```swift
func successScheduleNumber(key: String) -> Results<UserSchedule> {
	return localRealm.objects(UserSchedule.self).filter("scheduleSuccess == true AND schedule == '\(key)'")
}
```

ë°”ë¡œ scheduleSuccessê°€ trueì„ê³¼ ë™ì‹œì— ìŠ¤ì¼€ì¥´ì´ í‚¤ê°’ê³¼ ê°™ì€ ê²½ìš°ì˜ ì¿¼ë¦¬ë¥¼ ë¦¬í„´í•´ì£¼ëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

```swift
for i in 0..<repository.successSchedule().count {
	scheduleCountDic.updateValue(repository.successScheduleNumber(key: repository.successSchedule()[i].schedule).count, forKey: repository.successSchedule()[i].schedule)
}
```

ê·¸ ë‹¤ìŒ ë”•ì…”ë„ˆë¦¬ì— í‚¤ê°’ê³¼ ë°¸ë¥˜ë¥¼ ë‹´ì•„ì£¼ì—ˆìŠµë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ë§ì´ ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ì„ ìˆœì„œëŒ€ë¡œ ë³´ì—¬ì£¼ê³  ì‹¶ì–´ ì •ë ¬ì„ í•´ì¤€ ë’¤ ì…€ì— ë‚˜íƒ€ë‚´ì¤¬ìŠµë‹ˆë‹¤.

```swift
func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {

	// valueì˜ í¬ê¸°ëŒ€ë¡œ ë”•ì…”ë„ˆë¦¬ ì •ë ¬
	let sortedScheduleCountDic = scheduleCountDic.sorted { (first, second) in
		return first.value > second.value
	}

	guard let cell = collectionView.dequeueReusableCell(withReuseIdentifier: SecondCollectionViewCell.reuseIdentifier, for: indexPath) as? SecondCollectionViewCell else {
		return UICollectionViewCell()
	}

	// ì •ë ¬ëœ ë”•ì…”ë„ˆë¦¬ì— ë§ì¶° cellì— ê°’ ë„£ì–´ì£¼ã„±
	cell.scheduleLabel.text = sortedScheduleCountDic[indexPath.item].key
	cell.numberOfScheduleLabel.text = "\(sortedScheduleCountDic[indexPath.item].value)"

	return cell
}
```

___

# 220920


## 0. íŒ€ë¹Œë”©

Dateê°’ìœ¼ë¡œ Realmì— ì €ì¥ì„í•˜ë©´ ê·¸ë¦¬ë‹ˆì¹˜ì²œë¬¸ëŒ€ê¸°ì¤€(UTC)ë¡œ  ì €ì¥ëœë‹¤.

ê·¸ë˜ì„œ ì €ëŠ” í•œêµ­ê³¼ ì‹œì°¨ê°€ 9ì‹œê°„ì´ì—¬ì„œ 9ì‹œê°„ì„ ë”í•´ì„œ í•œêµ­ì‹œê°„ìœ¼ë¡œ ë§ì¶° ë”í•´ì£¼ì—ˆë‹¤. (Realmì—ë„ í•œêµ­ì‹œê°„ìœ¼ë¡œ ë§ì¶° ì €ì¥ë¨)


### í”¼ë“œë°± 
1. Realmì— í•œêµ­ ì‹œê°„ìœ¼ë¡œ ë§ì¶° ì €ì¥í•´ë²„ë¦¬ë©´ ë‹¤ë¥¸ êµ­ê°€ì—ì„œ ì‚¬ìš©í•  ë•Œ ì‹œê°„ ì¡°ì •ì´ ì–´ë µì§€ ì•Šì„ê¹Œìš”??
2. timezoneì„  ì‚¬ìš©í•´ì„œ ë§ì¶° ë³´ì„¸ìš”!!!(Stringìœ¼ë¡œ ë°”ê¾¸ì–´ì €ì¥)


### ë‚´ ìƒê°
- ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•  ë•Œ Dateê°’ì„ ê¸°ì¤€ìœ¼ë¡œ 86400ì„ ë”í•´ì„œ ë°˜ë³µë¬¸ìœ¼ë¡œ ë„£ì–´ì¤¬ëŠ”ë° ê·¸ëŸ¼ Dateë¥¼  Stringìœ¼ë¡œ ì €ì¥í•œë‹¤ë©´ ë˜ ì–´ë–»ê²Œ ë§ì¶°ê°€ì•¼í• ê¹Œ???


## UTC Date To KST Date(UTCì—ì„œ KST Dateê°’ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜)
```swift
func changeToSystemTimeZone(_ date: Date, from: TimeZone, to: TimeZone = TimeZone.current) -> Date {
    let sourceOffset = from.secondsFromGMT(for: date)
    let destinationOffset = to.secondsFromGMT(for: date)
    let timeInterval = TimeInterval(destinationOffset - sourceOffset)
    return Date(timeInterval: timeInterval, since: date)
}

let myTime = "2019-11-02 02:00:00"
let dateFormatter = DateFormatter()
dateFormatter.locale = Locale(identifier: "en_US_POSIX")
dateFormatter.dateFormat = "yyyy-MM-dd HH:mm:ss"

if let date = dateFormatter.date(from: myTime), let timeZone = TimeZone(abbreviation: "UTC") {
    let offsetedDate = changeToSystemTimeZone(date, from: timeZone)
    print(date, Calendar.current.timeZone)
    print(offsetedDate, timeZone)
}

let realmTime = Date.now
print(realmTime)

let utcSecondsFromGMT = TimeZone(abbreviation: "UTC")!.secondsFromGMT(for: realmTime)
let kstSecondsFromGMT = TimeZone(abbreviation: "KST")!.secondsFromGMT(for: realmTime)
let secondsBetweenUTCAndKST = TimeInterval(kstSecondsFromGMT - utcSecondsFromGMT)
let realmTimeToKST = Date(timeInterval: secondsBetweenUTCAndKST, since: realmTime)
print(realmTimeToKST)
```



## 1. í…Œì´ë¸”ë·°ì— ìŠ¤ì¼€ì¥´ ì œëŒ€ë¡œ ë„ì›Œì£¼ê¸°(ì‚½ì§ˆ)

ì œê°€ ì‚½ì§ˆí–ˆë˜?! ë‚´ìš©ì€ ëŒ€ëµì ìœ¼ë¡œ ì´ëŸ¬í•©ë‹ˆë‹¤...

FSCalendarì—ì„œ ë‚ ì§œë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ë‚ ì§œì˜ ë²”ìœ„ì— ìˆëŠ” Realm ê°’ì„ í•„í„°ë§í•´ì„œ dayTasksì— ë‹´ê³  ë‚˜íƒ€ë‚´ì£¼ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

í•„í„°ë§ì„ í•  ë•Œ 

```swift
func filterDayTasks(date: Date) -> Results<UserSchedule> {
	
	return localRealm.objects(UserSchedule.self).where {
		$0.scheduleDate >= calendar.startOfDay(for: date) && $0.scheduleDate < calendar.startOfDay(for: date)  + 86400
	}
}
```

ë‹¤ìŒê³¼ ê°™ì´ í´ë¦­í•œ dateë¥¼ ë°›ì•„ì™€ì„œ í•„í„°ë§ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤...

í´ë¦­í•œ ë‚ ì§œëŠ” ë¬´ì¡°ê±´ UTCê¸°ì¤€ìœ¼ë¡œ ë‹¹ì¼ 15:00ë¡œ ì£¼ì—ˆê³  `calendar.startOfDay(for:Date)` ëŠ” í•´ë‹¹ ë‚ ì˜ 00:00ì„ ë‚˜íƒ€ë‚´ì£¼ê¸° ë•Œë¬¸ì— +86400ì„ í•˜ë©´ ë‹¤ìŒ ë‚  00:00ì„ íŠ¹ì •í•  ìˆ˜ ìˆê³  ê·¸ê²ƒë³´ë‹¤ ì‘ìœ¼ë©´ 00:00~23:59ë¥¼ íŠ¹ì •í•  ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.

í•˜ì§€ë§Œ `calendar.startOfDay(for:Date)` ëŠ” UTCê¸°ì¤€ìœ¼ë¡œ ë‚˜íƒ€ë‚´ì£¼ê¸° ë•Œë¬¸ì— í•œêµ­ì‹œê°„ë³´ë‹¤ 9ì‹œê°„ ëŠë ¸ìŠµë‹ˆë‹¤. ì¦‰ í•œêµ­ì‹œê°„ìœ¼ë¡œ ìì •ì´ë©´ 15:00ìœ¼ë¡œ ì¸ì‹ë˜ëŠ” ê²ƒì´ì£ .


### 1-1. ì‚½ì§ˆ(ë»˜ ì§“)ì˜ ì‹œì‘...

ì™œì¸ì§€ ëª¨ë¥´ê² ì§€ë§Œ ë‹¹ì‹œ Realmì„ ë´¤ì„ ë•Œ ë‚ ì§œì™€ ë¹„êµí•´ë´¤ì„ ë•Œ í…Œì´ë¸”ë·°ì— ì´ìƒí•œ ë°ì´í„°ë¥¼ ë„ì›Œì¤€ë‹¤ê³  ì°©ê°í–ˆìŠµë‹ˆë‹¤.

ì˜¤ëŠ˜ê¸°ì¤€ìœ¼ë¡œ ë‹¤ìŒ ë‚ ë¶€í„° ì›”ë§ê¹Œì§€ ì •í•´ì§„ ìš”ì¼ì— ìŠ¤ì¼€ì¥´ì´ ë“±ë¡ë˜ëŠ”ë° DateëŠ” ë‹¹ì—°íˆ UTC ê°’ìœ¼ë¡œ ë“¤ì–´ê°€ê² ì£ ... ê·¸ëŸ¬ë©´ Date ì»¬ëŸ¼ìœ¼ì˜ ë°ì´í„°ê°€ í•œêµ­ì‹œê°„í•˜ê³¤ ì•ˆ ë§ì§€ë§Œ ì œëŒ€ë¡œ ì •í•œ ìš”ì¼ì— ë“±ë¡ì´ ëì„ê±°ì—ìš”...

ê·¸ëŸ°ë° ì–´? í•˜ë£¨ê°€ë°€ë ¸ë„¤ ì°©ê°í•˜ê³ ... ì´ë¥¼ í•œêµ­ì‹œê°„ì— ë§ì¶°ì£¼ë ¤ê³  í–ˆìŠµë‹ˆë‹¤...

```swift
var now = Date() + 86400 + 3600 * 9

func filterDayTasks(date: Date) -> Results<UserSchedule> {
	
	return localRealm.objects(UserSchedule.self).where {
            $0.scheduleDate >= calendar.startOfDay(for: date) + 3600 * 9 && $0.scheduleDate < calendar.startOfDay(for: date) + 86400 + 3600 * 9
	}
}

```

9ì‹œê°„ ì°¨ì´ê°€ ë‚˜ë‹ˆê¹Œ ë²”ìœ„ë¥¼ í•œêµ­ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ 00:00 ~ 23:59 ë§ì¶”ê³  nowì˜ ê°’ë„ í•œêµ­ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ë§ì¶°ì¤¬ìŠµë‹ˆë‹¤.

êµ³ì´ ì´ë ‡ê²Œ í•´ ì£¼ì§€ ì•Šì•„ë„ ì˜ ë°ì´í„°ê°€ ë“¤ì–´ê°€ëŠ”ë° ì œê°€ ì°©ê°ì„ í•œ ê±°ì£ ... UTCë¡œ ë“±ë¡œëœ Date ê°’ì„ ë³´ê³  ìº˜ë¦°ë”ì—” KSTë¡œ ë“±ë¡ëœ ê±¸ ë¹„êµí•˜ë‹ˆê¹Œ... ê°’ì´ ì•ˆë§ì§€ ã… ã… ...

ì €ë ‡ê²Œ í•œêµ­ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ë§ì¶°ë„ ë°ì´í„°ê°€ ì˜ ë‚˜ì˜¤ê¸´ í•˜ëŠ”ë°... ë‚˜ì¤‘ì— êµ­ì œëŒ€ì‘ í•˜ê±°ë‚˜ ë‹¤êµ­í™”??? ì‹œí‚¬ ë•Œ ë¶„ëª… ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ê±° ê°™ì•„ ì²˜ìŒìœ¼ë¡œ ë˜ëŒë ¸ìŠµë‹ˆë‹¤...


## 2. ìŠ¤ì™€ì´í”„ ì‚­ì œê¸°ëŠ¥

í…Œì´ë¸”ë·°ì—ì„œ ìŠ¤ì™€ì´í”„ì‹œ ì‚­ì œê¸°ëŠ¥ì„ ë„£ì—ˆìŠµë‹ˆë‹¤.

<img width="250" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 2 03 55" src="https://user-images.githubusercontent.com/92367484/191320460-b6c8161a-7d44-4f58-85dc-343cf556c60a.png">

ì œê°€ ìƒê°í•œ ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. í´ë¦­ì‹œì— ë‚˜ì˜¤ëŠ” í•„í„°ë§ëœ daytasksë¥¼ ê°€ì ¸ì˜¨ë‹¤.
2. ì‚­ì œí•œë‹¤.
3. ì»¬ë ‰ì…˜ë·° ì—…ë°ì´íŠ¸(trueì¸ ì…€ì„ ì§€ì› ì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸)

```swift
// In UserScheduleRepository
func filterDayTasks(date: Date) -> Results<UserSchedule> {
	
	return localRealm.objects(UserSchedule.self).where {
		$0.scheduleDate >= calendar.startOfDay(for: date) && $0.scheduleDate < calendar.startOfDay(for: date)  + 86400
	}
}

// In SecondViewController
// ìŠ¤ì™€ì´í”„ì‹œ ì‚­ì œ 
func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCell.EditingStyle, forRowAt indexPath: IndexPath) {
	
	if editingStyle == .delete {
		repository.delete(item: dayTasks?[indexPath.row])
	}
	
	// ì…€ì‚­ì œí•˜ë©´ ì»¬ë ‰ì…˜ë·°ì— ë‚˜íƒ€ë‚œ count ì—…ë°ì´íŠ¸
	for i in 0..<repository.successSchedule().count {
		scheduleCountDic.updateValue(repository.successScheduleNumber(key: repository.successSchedule()[i].schedule).count, forKey: repository.successSchedule()[i].schedule)
	}
	
	self.fetchRealm()
}

// ì„ íƒì‹œ dayTasksì— ì„ íƒí•œ ë‚  ë°ì´í„° í•„í„°ë§í•´ì£¼ëŠ” í•¨ìˆ˜
func calendar(_ calendar: FSCalendar, didSelect date: Date, at monthPosition: FSCalendarMonthPosition) {
	
	selectedDate = date
	
	scheduleInfo = []
	
	dayTasks = repository.filterDayTasks(date: date)
	self.fetchRealm()

	mainView.tableViewHeaderLabel.text = DateFormatChange.shared.dateOfMonth.string(from: date)
}
```

___

# 220921


## 1. FSCalendar ì˜¤ë¥˜?

íŠ¹ì • ë‚ ì„ ì°ìœ¼ë©´ ì ê¹ ë‹¤ë¥¸ ë‚ ì—ì„œ ê¹œë¹¡ê¹œë¹¡ ê±°ë¦¬ëŠ” í˜„ìƒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

https://user-images.githubusercontent.com/92367484/191509176-178cdfe5-244e-467f-80e1-7dde14892785.mp4

ê³ ë¯¼í•˜ë˜ ì¤‘ reloadData ì‹œì ì—ì„œ ë¬´ì–¸ê°€ ë¬¸ì œê°€ ìˆì§€ ì•Šì•˜ì„ê¹Œ? ìƒê°í—€ìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ ì´ ë¶€ë¶„ì„ ìˆ˜ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```swift
var tasks: Results<UserSchedule>! {
	didSet {
		dayTasks = repository.filterDayTasks(date: selectedDate)
		mainView.tableView.reloadData()
		mainView.collectionView.reloadData()
//      mainView.calendar.reloadData()
	}
}
```

ê·¸ë¬ë”ë‹ˆ ê¹œë¹¡ê±°ë¦¬ëŠ” ì˜¤ë¥˜?ê°€ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤.

https://user-images.githubusercontent.com/92367484/191509997-3a593b10-b0d3-4e50-9316-96f464f54434.mp4

ê·¸ëŸ°ë° ì´ë ‡ê²Œ í•˜ ê²½ìš° ì…€ì„ ì‚­ì œí•  ë•Œ ìº˜ë¦°ë”ì˜ ...ì´ ì´ˆê¸°í™”ê°€ ì•ˆ ë©ë‹ˆë‹¤.

taskê°€ ë³€í• ê²½ìš° `calendar.reloadData()` ê°€ ì•ˆ ë˜ê¸° ë–„ë¬¸ì´ì£ ...

ê·¸ë˜ì„œ ì…€ì„ ì‚­ì œí•´ ì¤„ ë•Œ `calendar.reloadData()` ë¥¼ í•´ì¤ë‹ˆë‹¤.

```swift
func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCell.EditingStyle, forRowAt indexPath: IndexPath) {
	
	if editingStyle == .delete {
		repository.delete(item: dayTasks?[indexPath.row])
	}
	
	// ì…€ì‚­ì œí•˜ë©´ ì»¬ë ‰ì…˜ë·°ì— ë‚˜íƒ€ë‚œ count ì—…ë°ì´íŠ¸
	for i in 0..<repository.successSchedule().count {
		scheduleCountDic.updateValue(repository.successScheduleNumber(key: repository.successSchedule()[i].schedule).count, forKey: repository.successSchedule()[i].schedule)
	}
	
	mainView.calendar.reloadData()
	self.fetchRealm()
}
```



## 2. íƒ€ì´ë¨¸ ì¤‘ë‹¨ê¸°ëŠ¥ ì¶”ê°€

ê¸°ì¡´ ì·¨ì†Œ ì‹œì‘ ë²„íŠ¼ë°–ì— ì—†ì—ˆë˜ TimerViewì— ë©ˆì¶”ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•´ì¤¬ìŠµë‹ˆë‹¤.


<img width="200" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-22 á„‹á…©á„Œá…¥á†« 12 43 54" src="https://user-images.githubusercontent.com/92367484/191550185-ae0bcccf-2df0-4d4f-8643-bb7ab184a887.png">


### 2-0. âì£¼ì˜ì‚¬í•­â

íƒ€ì´ë¨¸ëŠ” í•œ ë²ˆ ì‹¤í–‰ë˜ë©´ ê³„ì† ëŒì•„ê°€ê¸° ë•Œë¬¸ì— ì‚¬ìš©ì´ ëë‚˜ë©´ ë°˜ë“œì‹œ invalidateë¥¼ ì²˜ë¦¬í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.


### 2-1. ê³ ë¯¼í–ˆë˜ ì§€ì 

- ì‹œê°„ì´ ì§§ì„ ê²½ìš° ëŠê²¨ì„œ ë³´ì´ëŠ”í˜„ìƒ

https://user-images.githubusercontent.com/92367484/191554374-73b85dad-1558-4042-bc32-ee23f51fba2a.mp4


### 2-2. í•´ê²°

ì‚¬ì‹¤ íƒ€ì´ë¨¸ë¥¼ ë©ˆì¶”ëŠ” ê¸°ëŠ¥ì€ `timer?.invalidate()`  ì½”ë“œë§Œ ì‘ì„±í•´ì£¼ë©´ ë˜ì–´ì„œ  ê°„ë‹¨í–ˆì§€ë§Œ ì‹œê°„ì´ ì§§ì„ ê²½ìš° í”„ë¡œê·¸ë ˆìŠ¤ë°”ê°€ ëŠê²¨ì„œ ë³´ì´ëŠ” í˜„ìƒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸°ìœ„í•´ leftTimeì„ Doubleí˜•ìœ¼ë¡œ ë°”ê¾¸ê³  0.01ì´ˆë§ˆë‹¤ í”„ë¡œê·¸ë ˆìŠ¤ë°”ê°€ ê°±ì‹ ë  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```swift
timer = Timer.scheduledTimer(withTimeInterval: 0.01, repeats: true, block: { (t) in
	
	self.leftTime -= 0.01
	
	let minute = Int(self.leftTime) / 60
	let second = Int(self.leftTime) % 60
	
	if self.leftTime > 0 {
		self.timeLabel.text = String(format: "%02d:%02d", minute, second)
		self.progress = Double(self.leftTime) / Double(self.x)
		self.timerView.start(duration: 0.0001 , value: 1.0 - self.progress)
	} else {
		// ì™„ë£Œì‹œ ë…¸í‹°ì£¼ê¸°
		self.callNotification(time: 1, title: "ë¯¸ì…˜ ì™„ë£Œ!!!", body: "ë‹¤ìŒ ë¯¸ì…˜ë„ ì™„ìˆ˜í•´ì£¼ì„¸ìš”~~\në‹¤ ë§ˆì¹˜ì…¨ë‹¤ë©´ ë‹¹ì‹ ì€ ë©‹ìŸì´!!!")
		
		self.timeLabel.text = "ë!"
		self.okButton.layer.borderColor = UIColor.systemOrange.cgColor
		self.okButton.backgroundColor = .systemOrange
		self.okButton.isUserInteractionEnabled = true
		self.pauseAndPlayButton.isUserInteractionEnabled = false
		self.timer?.invalidate()
	}
})
```

https://user-images.githubusercontent.com/92367484/191554436-4f154f62-85a1-4f95-8314-56b9bf9880b7.mp4


___

# 220922

## 1. CollectionView ë‹¬ì— ë”°ë¼ í˜„í™© ë³´ì—¬ì£¼ê¸°

ê¸°ì¡´ ì»¬ë ‰ì…˜ ë·°ëŠ” ScheduleSuccessì—¬ë¶€ê°€ trueì¸ ê°’ë§Œ í•„í„°ë§ì„ í•´ì™€ì„œ ë‹¬ì— ìƒê´€ì—†ì´ ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ì´ë¼ë©´ ëª¨ë‘ ë‚˜íƒ€ë‚˜ê²Œ ë˜ì–´ìˆì—ˆë‹¤.(9ì›”ì¸ë°ë„ 10ì›” 11ì›” ìŠ¤ì¼€ì¥´ ë‚˜íƒ€ë‚¨)

```swift
// In UserScheduleRepository
func successSchedule() -> Results<UserSchedule> {
	return localRealm.objects(UserSchedule.self).filter("scheduleSuccess == true")
}
```


### 1-1. ë‹¬ì˜ì‹œì‘, ë‹¤ìŒ ë‹¬ êµ¬í•˜ê¸°

```swift
let calendar = Calendar.current
print("calendar : \(calendar)") // calendar : gregorian (current)

let date = Date()
print("date : \(date)") // date : 2022-09-22 08:16:25 +0000

let components = calendar.dateComponents([.year, .month], from: date)
print("components : \(components)") // components : year: 2022 month: 9 isLeapMonth: false

// componentsì— dayë¥¼ ê¸°ì…í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— componentsë¥¼ dateë¡œ ë°”ê¿”ì£¼ë©´ ë‹¬ì˜ ì²«ë²ˆì§¸ ë‚ ì´ ë‚˜ì˜´
let startOfMonth = calendar.date(from: components)
print("startOfMonth : \(startOfMonth!)") // startOfMonth : 2022-08-31 15:00:00 +0000

// valueì˜ ê°’ì— ë”°ë¼ 1ë‹¬, 2ë‹¬ì´ ëŠ˜ì–´ë‚˜ê²Œë¨
let nextMonth = calendar.date(byAdding: .month, value: +0, to: startOfMonth!)
print("nextMonth : \(nextMonth!)") // nextMonth : nextMonth : 2022-08-31 15:00:00 +0000

let nextMonth2 = calendar.date(byAdding: .month, value: +1, to: startOfMonth!)
print("nextMonth2 : \(nextMonth2!)") // nextMonth2 : 2022-09-30 15:00:00 +0000
```


### 1-2. ë”•ì…”ë„ˆë¦¬ì— ë‹´ì•„ì£¼ê¸°

```swift
// In UserScheduleRepository
func successScheduleInMonth(currentDate: Date) -> Results<UserSchedule> {

	let nextMonth = calendar.date(byAdding: .month, value: +1, to: currentDate)

	return localRealm.objects(UserSchedule.self).where {
		$0.scheduleSuccess == true && $0.scheduleDate >= currentDate && $0.scheduleDate < nextMonth!
	}
}

func successScheduleNumber(key: String) -> Results<UserSchedule> {
	return localRealm.objects(UserSchedule.self).filter("scheduleSuccess == true AND schedule == '\(key)'")
}

// In SecondViewController
var scheduleInfo = [scheduleInfoModel]()
var date = Date()

override func viewWillAppear(_ animated: Bool) {
	super.viewWillAppear(animated)
	
	let components = calendar.dateComponents([.year, .month], from: date)
	let startOfMonth = calendar.date(from: components)!
	
	
	// ì»¬ë ‰ì…˜ë·° ì—…ë°ì´íŠ¸
	for i in 0..<repository.successScheduleInMonth(currentDate: startOfMonth).count {
		scheduleCountDic.updateValue(repository.successScheduleNumber(key: repository.successScheduleInMonth(currentDate: startOfMonth)[i].schedule).count, forKey: repository.successScheduleInMonth(currentDate: startOfMonth)[i].schedule)
	}
}

```

ì œê°€ í•´ì¤˜ì•¼í•˜ëŠ” ê²ƒì€ ì»¬ë ‰ì…˜ë·°ì— ì´ë²ˆ ë‹¬ ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ + ì„±ê³µíšŸìˆ˜ ì˜€ìŠµë‹ˆë‹¤.

ë•Œë¬¸ì— ì´ë²ˆ ë‹¬ ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ê³¼ ì„±ê³µíšŸìˆ˜ë¥¼ DBì—ì„œ ê°€ì ¸ì™€ ì£¼ëŠ” ê²ƒì´ ì£¼ìš”ìŸì  ì´ì—ˆìŠµë‹ˆë‹¤.

ë¨¼ì € ì˜¤ëŠ˜ë‚ ì§œì¸ dateë¥¼ ê¸°ì¤€ìœ¼ë¡œ startOfMonth(ì›”ì˜ ê°€ì¥ ì²«ë‚ )ì„ ê°€ì ¸ì™€ì£¼ê³  ì²« ë‚ ì„ ê¸°ì¤€ìœ¼ë¡œ `successScheduleInMonth(currentDate: Date) -> Results<UserSchedule>` ë©”ì†Œë“œë¥¼ í†µí•´ nextMonth(ë‹¤ìŒ ë‹¬ ì²« ë‚ )ì„ íŠ¹ì •í•´ ê·¸ ê°’ì„ ë°˜í™˜ì‹œì¼œì¤ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ì„ ëª¨ë‘ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ì£ .

ê·¸ë¦¬ê³  ë‚˜ë©´ ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ì´ ê°ê° ëª‡ ë²ˆì”© ì¸ì§€ë¥¼ ê°€ì ¸ì™€ì¤˜ì•¼ê² ì£ ?

ì´ ë•Œ ì €ëŠ” `successShceduleNumber(key: String) -> Results<UserSchedule>` ë©”ì†Œë“œë¥¼ í†µí•´ ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ + ìŠ¤ì¼€ì¥´ ì´ë¦„ì„ í‚¤ê°’ìœ¼ë¡œ ë°›ì•„ì™€ì„œ ê°ê°ì˜ ìŠ¤ì¼€ì¥´ì´ ëª‡ ë²ˆ ì„±ê³µí–ˆëŠ”ì§€ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  forë¬¸ì„ í†µí•´ ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ì˜ ê°œìˆ˜ë§Œí¼ ë°˜ë³µí•´ì„œ ì„±ê³µí•œìŠ¤ì¼€ì¥´ì˜ ê°œìˆ˜ë¥¼ valueì— ì„±ê³µí•œ ìŠ¤ì¼€ì¥´ì„ keyê°’ìœ¼ë¡œ ë‹´ì•„ ì£¼ì—ˆìŠµë‹ˆë‹¤.


### 1-3. ìº˜ë¦°ë” ìŠ¤ì™€ì´í”„ì‹œ ê°’ ë³€ê²½

ìŠ¤ì™€ì´í”„ ì‹œ(ë‹¬ì´ ë³€ê²½ë  ë•Œ) ê°ê°ì˜ ë‹¬ì˜ ì„±ê³µ íšŸìˆ˜ë¥¼ ì»¬ë ‰ì…˜ë·°ë¡œ ë³´ì—¬ì£¼ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.

ì´ ë•Œ FSCalendarì˜ delegateíŒ¨í„´ì˜ `calendarCurrentPageDidChange(_ calendar: FSCalendar)` ë©”ì†Œë“œë¥¼ í™œìš©í–ˆìŠµë‹ˆë‹¤.

```swift
func calendarCurrentPageDidChange(_ calendar: FSCalendar) {


	// í˜„ì¬ ë‹¬ë ¥ í˜ì´ì§€ì˜ ì²« ë‚  ê°’ì„ ê°€ì ¸ì˜´
	let currentPageDate = calendar.currentPage
	let month = Calendar.current.component(.month, from: currentPageDate)
	
	scheduleCountDic = [:]
	successCount = 0
	
	// ìŠ¤ì™€ì´í”„ì‹œ dateê°’ì„ ë³€ê²½ì‹œì¼œì•¼ ë‹¤ë¥¸ í˜ì´ì§€ë¥¼ ê°”ë‹¤ì™€ë„ í•´ë‹¹ ì›”ì˜ ìŠ¤ì¼€ì¥´ ì„±ê³µì—¬ë¶€ê°€ ì»¬ë ‰ì…˜ë·°ì— ì˜ ë‚˜ì˜´
	date = currentPageDate
	
	for i in 0..<repository.successScheduleInMonth(currentDate: currentPageDate).count {
		scheduleCountDic.updateValue(repository.successScheduleNumber(key: repository.successScheduleInMonth(currentDate: currentPageDate)[i].schedule).count, forKey: repository.successScheduleInMonth(currentDate: currentPageDate)[i].schedule)
	}
	
	mainView.collectionViewHeaderLabel.text = "\(month)ì›” ë¯¸ì…˜ í˜„í™©"
			
	// ìº˜ë¦°ë” ìŠ¤ì™€ì´í”„ì‹œì— í…Œì´ë¸”ë·° ìˆ¨ê¸°ê¸°
	mainView.tableView.isHidden = true

	mainView.collectionView.reloadData()
}
```

ìŠ¤ì™€ì´í”„ í•  ë•Œë§ˆë‹¤ scheduleCountDicì„ ë¹„ì›Œì£¼ê³  ë‹¤ì‹œ í•´ë‹¹ ì›”ì˜ ê°’ì„ ë°›ì•„ ê°’ì„ ì±„ì›Œì£¼ì–´ ì»¬ë ‰ì…˜ë·°ì— ë‚˜íƒ€ë‚´ ì¤ë‹ˆë‹¤.

https://user-images.githubusercontent.com/92367484/194487347-25a117d5-a30e-4c16-9dea-49d48c2dc40f.MP4


# 220923

## 1. ì…€ ìˆ˜ì •

ì…€ ìˆ˜ì •ì—ì„œ ì œê°€ ê³ ë ¤í•œ ë¶€ë¶„ì€ ì´ë¯¸ ì§€ë‚˜ê°„ ìŠ¤ì¼€ì¥´ì˜ ê²½ìš° ìˆ˜ì •ì´ ë¶ˆê°€í•˜ê²Œ ë§‰ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. 

í•œ ë‹¬ê°„ ê³„íšì„ ì±Œë¦°ì§€í•˜ê²Œ ì„¸ìš°ëŠ”ë° ì„±ê³µí–ˆë˜ ìŠ¤ì¼€ì¥´ì´ë‚˜ ì‹¤íŒ¨í–ˆë˜ ìŠ¤ì¼€ì¥´ì„ ìˆ˜ì •ê°€ëŠ¥í•˜ê²Œ ë‘ë©´ ì•ˆ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

### â ì£¼ì˜ì‚¬í•­ â

ëª¨ë‹¬ì€ ViewWillAppearì‹œì ì´ í†µí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í´ë¡œì ¸ë¡œ ê°’ ì „ë‹¬ í›„ ê°’ì„ ìˆ˜ì •í•œë‹¤.

í´ë¡œì €, ë…¸í‹°í”¼ì¼€ì´ì…˜, í”„ë¡œí† ì½œì„ ì´ìš©í•´ ê°’ ì „ë‹¬ì„ í•  ë•Œì—ëŠ”  ëª¨ë‹¬, í‘¸ì‹œì•¤íŒ ë“±ìœ¼ë¡œ ë‹¤ìŒí™”ë©´ê³¼ ì „ í™”ë©´ì„ íŠ¹ì •í•  ìˆ˜ ìˆì–´ì•¼ ê°’ ì „ë‹¬ì´ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§„ë‹¤.


### 1-1. í´ë¡œì €ë¥¼ ì´ìš©í•œ ê°’ ì „ë‹¬

#### 1) ê°’ ì „ë‹¬ë°›ì„ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í´ë¡œì € ì„ ì–¸
```swift
// In ChangeScheduleViewController
final class ChangeScheduleViewController: BaseViewController {
	// 1. ì‹¤í–‰ë  ë¹ˆ í´ë¡œì € ì„ ì–¸
	var okButtonActionHandler: ( () -> Void )?
}
```

#### 2) í´ë¡œì € í•¨ìˆ˜ ì •ì˜
```swift
// In SecondViewController
func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
		
	let vc = ChangeScheduleViewController()
	
	// ì§€ë‚˜ê°„ ë‚ ì§œ + í˜„ì¬ ì‹œê°„ ê¸°ì¤€ ì˜¤ì „9ì‹œê°€ ë„˜ìœ¼ë©´ ìˆ˜ì • ë¶ˆê°€
	// 1. scheduleDateì™€ ì˜¤ëŠ˜ ë‚ ì§œê°€ ê°™ìŒ
	// 2. ì˜¤ì „ 9ì‹œ ~ 24ì‹œê¹Œì§€ ì‚¬ì´ì—” ìˆ˜ì • ë¶ˆê°€
	
	if dayTasks[indexPath.row].scheduleSuccess == true {
		showAlertOnlyOk(title: "ì™„ë£Œí•œ ìŠ¤ì¼€ì¥´ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
	} else {
		if dayTasks[indexPath.row].scheduleDate < calendar.startOfDay(for: now) ||
			DateFormatChange.shared.dateOfYearMonthDay.string(from: dayTasks[indexPath.row].scheduleDate) == DateFormatChange.shared.dateOfYearMonthDay.string(from: now) &&
			(now > calendar.startOfDay(for: now) + 32400 && now < calendar.startOfDay(for: now) + 86400 ) {
			
			showAlertOnlyOk(title: "ì§€ë‚œ ì¼ì •ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
		} else {
			
			// 2. í´ë¡œì € í•¨ìˆ˜ ì •ì˜
			vc.okButtonActionHandler = {
				self.mainView.tableView.reloadData()
			}
			
			let nav = UINavigationController(rootViewController: vc)
			present(nav, animated: true)
		}
	}
}
```


#### 3) ì „ë‹¬ë°›ì€ í´ë¡œì € ì‹¤í–‰

```swift
// In ChageScheduleViewController
@objc func okButtonClicked() {
	
	guard let setStartTimeButtonDate = DateFormatChange.shared.dateOfHourAndPM.date(from: mainView.setStartTimeButton.titleLabel?.text ?? "") else { return }
	
	guard let setEndTimeButtonDate = DateFormatChange.shared.dateOfHourAndPM.date(from: mainView.setEndTimeButton.titleLabel?.text ?? "") else { return }
	
	if mainView.setScheduleTextField.text?.count == 0 {
		showAlertOnlyOk(title: "ë¯¸ì…˜ì„ ì…ë ¥í•´ì£¼ì„¸ìš”")
	} else if mainView.setStartTimeButton.titleLabel?.text == mainView.setEndTimeButton.titleLabel?.text {
		showAlertOnlyOk(title: "ì‹œì‘ì‹œê°„ê³¼ ì¢…ë£Œì‹œê°„ì€\nê°™ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\në‹¤ë¥¸ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”")
	} else if setStartTimeButtonDate > setEndTimeButtonDate {
		self.showAlertOnlyOk(title: "ì‹œì‘ì‹œê°„ì€ ì¢…ë£Œì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼í•©ë‹ˆë‹¤\nì¢…ë£Œì‹œê°„ì„ ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”")
	} else {
		
		// ë ˜ ìˆ˜ì •
		repository.updateSchedule(objectID: objectID!, startTime: self.mainView.setStartTimeButton.titleLabel?.text ?? "", endTime: self.mainView.setEndTimeButton.titleLabel?.text ?? "", schedule: self.mainView.setScheduleTextField.text!)

		// 3. í´ë¡œì €ì‹¤í–‰
		okButtonActionHandler?()

		dismiss(animated: true)
	}
}
```


## 2. ì…€ ì‚­ì œ

ì…€ ì‚­ì œì—ì„œ ì œê°€ ê³ ë ¤í•œ ë¶€ë¶„ì€ ì´ë¯¸ ë‚ ì§œê°€ ì§€ë‚˜ê°„ ì…€ì€ ì‚­ì œê°€ ë¶ˆê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

ì™œëƒí•˜ë©´ ì´ë¯¸ ì§€ë‚˜ê°„ ìŠ¤ì¼€ì¥´ì„ ì‚­ì œí•˜ê²Œ ë§Œë“¤ë©´ í›„ì— í†µê³„ë¥¼ ë‚¼ ë•Œ ì¡°ì‘ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì´ì™€ê°™ì´ ì˜ˆì™¸ì²˜ë¦¬ë¥¼í•´ì„œ ì½”ë“œë¥¼ ì§°ìŠµë‹ˆë‹¤.

```swift
func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCell.EditingStyle, forRowAt indexPath: IndexPath) {
	 
	if dayTasks[indexPath.row].scheduleSuccess == true {
		showAlertOnlyOk(title: "ì™„ë£Œí•œ ìŠ¤ì¼€ì¥´ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
	} else {
		if dayTasks[indexPath.row].scheduleDate < calendar.startOfDay(for: now) + 86400 {
			showAlertOnlyOk(title: "ì§€ë‚œ ì¼ì •ì´ë‚˜ ë‹¹ì¼ ì¼ì •ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
		} else {
			if editingStyle == .delete {
				repository.delete(item: dayTasks?[indexPath.row])
			}
			
			mainView.calendar.reloadData()
			self.fetchRealm()
		}
	}
}
```


# 220924

## 1. ìº˜ë¦°ë”ì— ìŠ¤ì¼€ì¥´ & ìˆ˜í–‰ì—¬ë¶€ dotìœ¼ë¡œ í‘œí˜„

ìº˜ë¦°ë”ì— ìœ ì €ê°€ ìŠ¤ì¼€ì¥´ì„ ëª‡ ê°œ ë“±ë¡í–ˆê³  ëª‡ ê°œ ìˆ˜í–‰í–ˆëŠ”ì§€ë¥¼ ë‹¬ë ¥ì— í‘œì‹œí•´ì£¼ê¸° ìœ„í•´ FSCalendarì—ì„œ ì œê³µí•˜ëŠ” eventë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

FSCalendarëŠ” ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ eventSelectionColorë¡œ ë°”ë€Œê¸° ë•Œë¬¸ì— ì„ íƒì‹œì—ë„ eventColorë¥¼ ì¼ì¹˜ì‹œì¼œ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

```swift
enum EventDotColor {
    static let successZeroTime = [UIColor.systemGray4, UIColor.systemGray4, UIColor.systemGray4]
    static let successOneTime = [UIColor.successColor, UIColor.systemGray4, UIColor.systemGray4]
    static let successTwoTime = [UIColor.successColor, UIColor.successColor, UIColor.systemGray4]
    static let successThreeTime = [UIColor.successColor, UIColor.successColor, UIColor.successColor]
}

extension SecondViewController: FSCalendarDelegate, FSCalendarDataSource, FSCalendarDelegateAppearance {
    
    // ... ê°œìˆ˜
    func calendar(_ calendar: FSCalendar, numberOfEventsFor date: Date) -> Int {

        let eventStringArr = eventArr.map { DateFormatChange.shared.dateOfYearMonthDay.string(from: $0) }
        let eventDateArr = eventStringArr.map { DateFormatChange.shared.dateOfYearMonthDay.date(from: $0) }
                
        if eventDateArr.contains(date) {
            switch repository.filterDayTasks(date: date).count {
            case 0:
                return 0
            case 1:
                return 1
            case 2:
                return 2
            case 3:
                return 3
            default:
                return 3
            }
        } else {
            return 0
        }
    }
    
    // ... ìƒ‰
    func calendar(_ calendar: FSCalendar, appearance: FSCalendarAppearance, eventDefaultColorsFor date: Date) -> [UIColor]? {
        
        dayTasksAndSuccess = repository.filterDayTasksAndSuccess(date: date)
        
        switch dayTasksAndSuccess.count {
        case 0:
            return EventDotColor.successZeroTime
        case 1:
            return EventDotColor.successOneTime
        case 2:
            return EventDotColor.successTwoTime
        case 3:
            return EventDotColor.successThreeTime
        default:
            return EventDotColor.successThreeTime
        }
    }

	// ì„ íƒì‹œ ... ìƒ‰
    func calendar(_ calendar: FSCalendar, appearance: FSCalendarAppearance, eventSelectionColorsFor date: Date) -> [UIColor]? {

        switch dayTasksAndSuccess.count {
        case 0:
            return EventDotColor.successZeroTime
        case 1:
            return EventDotColor.successOneTime
        case 2:
            return EventDotColor.successTwoTime
        case 3:
            return EventDotColor.successThreeTime
        default:
            return EventDotColor.successThreeTime
        }
    }
}
```


## 2. ì˜¤ë¥˜ìˆ˜ì •

ì‹œê°„ì„ íƒì‹œ í…ìŠ¤íŠ¸ ê¸°ì¤€("ì‹œê°„ì„ íƒ" í…ìŠ¤íŠ¸ë¥¼ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì²˜ë¦¬)ìœ¼ë¡œ ì²˜ë¦¬í•´ì„œ ìˆ˜ì •ì‹œì— "ì‹œê°„ì„ íƒ"ì´ ì•„ë‹ˆë¼ ê¸°ì¡´ì˜ ì‹œê°„ì´ ë“±ë¡ë˜ì–´ ìˆì–´ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

```swift
// ê¸°ì¡´ ì½”ë“œ

// In ChangeScheduleViewController

// ì‹œì‘ì‹œê°„ ì„ íƒë²„íŠ¼
@objc func setStartTimeButtonClicked(sender: UIDatePicker) {
        
	let ok = UIAlertAction(title: "í™•ì¸", style: .default) { (action) in
		
		let dateString = DateFormatChange.shared.dateOfHourAndPM.string(from: datePicker.date)
		self.setStartTimeDatePickerDate = datePicker.date
		
		if self.mainView.setEndTimeButton.titleLabel?.text == dateString {
			self.showAlertOnlyOk(title: "ì‹œì‘ì‹œê°„ê³¼ ì¢…ë£Œì‹œê°„ì€\nê°™ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\në‹¤ë¥¸ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”")
		} else if self.setEndTimeDatePickerDate! > self.setEndTimeDatePickerDate! {
			self.showAlertOnlyOk(title: "ì‹œì‘ì‹œê°„ì€ ì¢…ë£Œì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼í•©ë‹ˆë‹¤\nì¢…ë£Œì‹œê°„ì„ ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”")
		} else if self.calendar.component(.hour, from: datePicker.date) > 3 && self.calendar.component(.hour, from: datePicker.date) < 9 {
			self.mainView.setStartTimeButton.setTitle(dateString, for: .normal)
			self.mainView.setStartTimeButton.setTitleColor(.systemBlue, for: .normal)
		} else {
			self.showAlertOnlyOk(title: "ì˜¤ì „ 4ì‹œë¶€í„° ì˜¤ì „9ì‹œê¹Œì§€ë§Œ ì‹œê°„ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤")
		}
	}
}


// ì¢…ë£Œì‹œê°„ ì„ íƒë²„íŠ¼
@objc func setEndTimeButtonClicked() {
	
	let ok = UIAlertAction(title: "í™•ì¸", style: .default) { (action) in
	
		let dateString = DateFormatChange.shared.dateOfHourAndPM.string(from: datePicker.date)
		self.setEndTimeDatePickerDate = datePicker.date
		
		if self.mainView.setStartTimeButton.titleLabel?.text == "ì‹œê°„ì„ íƒ" {
			self.showAlertOnlyOk(title: "ì‹œì‘ì‹œê°„ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”")
		} else if self.mainView.setStartTimeButton.titleLabel?.text == dateString {
			self.showAlertOnlyOk(title: "ì‹œì‘ì‹œê°„ê³¼ ì¢…ë£Œì‹œê°„ì€\nê°™ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\në‹¤ë¥¸ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”")
		} else if self.setStartTimeDatePickerDate! > self.setEndTimeDatePickerDate! {
			self.showAlertOnlyOk(title: "ì‹œì‘ì‹œê°„ì€ ì¢…ë£Œì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼í•©ë‹ˆë‹¤\nì¢…ë£Œì‹œê°„ì„ ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”")
		} else {
			if self.calendar.component(.hour, from: datePicker.date) > 3 && self.calendar.component(.hour, from: datePicker.date) < 9 {
				self.mainView.setEndTimeButton.setTitle(dateString, for: .normal)
				self.mainView.setEndTimeButton.setTitleColor(.systemBlue, for: .normal)
			} else {
				self.showAlertOnlyOk(title: "ì˜¤ì „ 4ì‹œë¶€í„° ì˜¤ì „9ì‹œê¹Œì§€ë§Œ ì‹œê°„ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤")
			}
		}
	}
}
```


```swift
// ìˆ˜ì •ëœì½”ë“œ
@objc func setStartTimeButtonClicked(sender: UIDatePicker) {
	
	let ok = UIAlertAction(title: "í™•ì¸", style: .default) { (action) in
		
		let dateString = DateFormatChange.shared.dateOfHourAndPM.string(from: datePicker.date)
		self.setStartTimeDatePickerDate = datePicker.date
		
		if self.calendar.component(.hour, from: datePicker.date) > 3 && self.calendar.component(.hour, from: datePicker.date) < 9 {
			self.mainView.setStartTimeButton.setTitle(dateString, for: .normal)
			self.mainView.setStartTimeButton.setTitleColor(.systemBlue, for: .normal)
		} else {
			self.showAlertOnlyOk(title: "ì˜¤ì „ 4ì‹œë¶€í„° ì˜¤ì „9ì‹œê¹Œì§€ë§Œ ì‹œê°„ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤")
		}
	}
}

@objc func setEndTimeButtonClicked() {
	
	let ok = UIAlertAction(title: "í™•ì¸", style: .default) { (action) in
	
		let dateString = DateFormatChange.shared.dateOfHourAndPM.string(from: datePicker.date)
		self.setEndTimeDatePickerDate = datePicker.date
		
		if self.mainView.setStartTimeButton.titleLabel?.text == self.mainView.setEndTimeButton.titleLabel?.text {
			self.showAlertOnlyOk(title: "ì‹œì‘ì‹œê°„ê³¼ ì¢…ë£Œì‹œê°„ì€\nê°™ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\në‹¤ë¥¸ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”")
		} else {
			if self.calendar.component(.hour, from: datePicker.date) > 3 && self.calendar.component(.hour, from: datePicker.date) < 9 {
				self.mainView.setEndTimeButton.setTitle(dateString, for: .normal)
				self.mainView.setEndTimeButton.setTitleColor(.systemBlue, for: .normal)
			} else {
				self.showAlertOnlyOk(title: "ì˜¤ì „ 4ì‹œë¶€í„° ì˜¤ì „9ì‹œê¹Œì§€ë§Œ ì‹œê°„ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤")
			}
		}
	}
}
```


# 220926

## 1. ë‚ ì§œë¥¼ ëˆ„ë¥´ê³  ìŠ¤ì™€ì´í”„ë¥¼ ê³„ì†í•˜ë©´ ì˜¤ë¥˜ë°œìƒ

<img width="669" alt="ìŠ¤í¬ë¦°ìƒ· 2022-09-25 ì˜¤ì „ 11 50 13" src="https://user-images.githubusercontent.com/92367484/194553850-5c031e10-e674-490f-a1e7-6dbca667a9d1.png">


```swift
func calendar(_ calendar: FSCalendar, appearance: FSCalendarAppearance, eventSelectionColorsFor date: Date) -> [UIColor]? {

	var successCount = 0

	dayTasks = repository.filterDayTasks(date: date)

	for i in 0..<dayTasks.count {
		if dayTasks[i].scheduleSuccess == true {
			successCount += 1
		}
	}

	
	switch successCount {
	case 0:
		return EventDotColor.successZeroTime
	case 1:
		return EventDotColor.successOneTime
	case 2:
		return EventDotColor.successTwoTime
	case 3:
		return EventDotColor.successThreeTime
	default:
		return EventDotColor.successThreeTime
	}
}
```

ì°¾ì•„ë³´ë‹ˆ ìº˜ë¦°ë”ì— ì ì„ ì°ëŠ” ì§€ì ì—ì„œ ì¸ë±ìŠ¤ ì˜¤ë¥˜ê°€ ë‚˜ê³ ìˆì—ˆë‹¤. 

ë¡œì§ì€ ë¶„ëª… ë§ëŠ”ë° ì™œ ì¸ë±ì‹±ì´ ê³„ì† ëœë¤ìœ¼ë¡œ ë°”ë€Œì–´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ê±¸ê¹Œ...

ë‹µì€ ì—¬ê¸°ì—ìˆì—ˆë‹¤.

```swift
// ìº˜ë¦°ë” ë‚ ì§œ ì„ íƒ
func calendar(_ calendar: FSCalendar, didSelect date: Date, at monthPosition: FSCalendarMonthPosition) {
	
	selectedDate = date
	scheduleInfo = []

// ë‚ ì§œ ì„ íƒì‹œ dayTasks í˜„ì¬ ë‚ ì§œì— ìˆëŠ” ê±°ë§Œ í•„í„°ë§ ì‹œì¼œì£¼ê¸°(í…Œì´ë¸”ë·°ì— ë‚˜íƒ€ë‚´ì£¼ê¸° ìœ„í•´)
//   dayTasks = repository.filterDayTasks(date: date)
	self.fetchRealm()

	mainView.tableViewHeaderLabel.text = DateFormatChange.shared.dateOfMonth.string(from: date)
	
	// ìº˜ë¦°ë” ìŠ¤ì™€ì´í”„ì‹œì— í…Œì´ë¸”ë·° ë‚˜íƒ€ë‚´ê¸°
	mainView.tableView.isHidden = false
}
```

ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ ê·¸ ë‚ ì§œì— ì†í•œ ë°ì´í„°ë¥¼ í…Œì´ë¸”ë·°ë¡œ ë³´ì—¬ì£¼ê¸°ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.

í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë˜ë©´ ìº˜ë¦°ë”ë¥¼ ì„ íƒí•  ë•Œë„ dayTasksê°€ ì´ˆê¸°í™”ë˜ê³  ì²˜ìŒì— ...ì— ìƒ‰ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•´ dayTasksë¥¼ ì´ˆê¸°í™” ì‹œí‚¤ê²Œ ëœë‹¤.

ì¦‰ ë·°ë¥¼ ë„ìš°ë©´ ì²˜ìŒ `eventSelectionColorsFor`ê°€ ì‹¤í–‰ë˜ì–´ dayTasksê°€ ì´ˆê¸°í™”ë˜ê³  ì…€ì„ ì„ íƒí•˜ë©´ `didSelect`ê°€ ì‹¤í–‰ë˜ì–´ dayTasksê°€ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ì¶©ëŒì´ ë°œìƒí•˜ê²Œ ëë‹¤.(ì–´ì©ì§€ ë‚ ì§œì„ íƒì•ˆí•˜ê³  ìŠ¤ì™€ì´í”„ í•˜ë©´ ì˜¤ë¥˜ê°€ ì•ˆ ë°œìƒí–ˆì—ˆë‹¤...)

ê·¸ë˜ì„œ `didSelect`ì‹œì— dayTasksë¥¼ ì´ˆê¸°í™” ì‹œì¼œì£¼ëŠ” ë¶€ë¶„ì€ ì‚­ì œí•˜ê³  ì œì¼ ì²˜ìŒ ë·°ë¥¼ ë„ìš¸ ë•Œ `eventSelectionColorsFor`ì—ë§Œ dayTasksë¥¼ ì´ˆê¸°í™” ì‹œì¼œì£¼ë„ë¡ í–ˆë‹¤.

### ë‹¤ì‹œ ì˜¤ë¥˜ ë°œìƒ...

 ì˜ ë˜ë‹¤ê°€ ë˜ ì•ˆëœë‹¤... ì´ìœ ê°€ ë­˜ê¹Œ??

ìŠ¤ì™€ì´í”„ì‹œì— dayTasksë¥¼ ì•ˆë§ì¶° ì£¼ì–´ì„œ ê·¸ëŸ°ê°€???

printë¥¼ ì°ì–´ë´¤ëŠ”ë° ë§¤ ë²ˆ successCountê°€ ìŠ¤ì™€ì´í”„ì‹œë§ˆë‹¤ ë°”ë€ŒëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤...

ì´ê²Œ ì¤‘ìš”í•œê²Œ ì„±ê³µíšŸìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ì£¼ê³  ê·¸ì— ë”°ë¼ ì ì— ìƒ‰ì„ ì±„ì›Œì£¼ëŠ” ê±´ë°... ê·¸ëŸ¬ë©´ ì´ê²Œ ë¬¸ì œì¸ê±¸ê¹Œ?


### âœ… í•´ê²° âœ…

successCountë¥¼ ë°˜ë³µë¬¸ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì€ ìƒê°í•´ë³´ë‹ˆ... ê·¸ë ‡ê²Œ ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹Œê±°ê°™ë‹¤.

ê·¸ë˜ì„œ Realmì„ í†µí•´ í•´ë‹¹ì¼ì˜ ìŠ¤ì¼€ì¥´ ì„±ê³µí•œ ê°’ì„ í•„í„°ë§í•´ì„œ ê°€ì ¸ì™€ì„œ ë‚˜íƒ€ë‚´ê³ ì ì‹œë„í–ˆë‹¤.

```swift
// In UserScheduleRepository
func filterDayTasksAndSuccess(date: Date) -> Results<UserSchedule> {
	return localRealm.objects(UserSchedule.self).where {
		$0.scheduleDate >= calendar.startOfDay(for: date) && $0.scheduleDate < calendar.startOfDay(for: date)  + 86400 && $0.scheduleSuccess == true
	}
}

// In SecondViewController
var dayTasksAndSuccess: Results<UserSchedule>!

// In Calendar + Delegate
func calendar(_ calendar: FSCalendar, appearance: FSCalendarAppearance, eventDefaultColorsFor date: Date) -> [UIColor]? {
	
	dayTasksAndSuccess = repository.filterDayTasksAndSuccess(date: date)
	
	switch dayTasksAndSuccess.count {
	case 0:
		return EventDotColor.successZeroTime
	case 1:
		return EventDotColor.successOneTime
	case 2:
		return EventDotColor.successTwoTime
	case 3:
		return EventDotColor.successThreeTime
	default:
		return EventDotColor.successThreeTime
	}
}
```

dayTasksê°€ ì•„ë‹ˆë¼ Realmì„ í†µí•´ í•„í„°ë§ì„ í•´ì£¼ë‹ˆ ì˜¤ë¥˜ê°€ í•´ê²°ë˜ì—ˆë‹¤.

ì§„ì‘ Realmì—ì„œ ê°€ì ¸ì™€ ë‚˜íƒ€ë‚´ì¤„ ê±¸ ê·¸ë¬ë‹¤. ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•´ successCountë¥¼ ë†’ì´ëŠ” ê±°ë³´ë‹¤ í›¨ì”¬ ë” ê¹”ë”í•œ ì½”ë“œê°€ ë˜ì—ˆë‹¤.

ìµœëŒ€í•œ Realmì„ í™œìš©í•˜ê³ ì ë…¸ë ¥í•´ì•¼ê² ìŠµë‹ˆë‹¤...


# 220927

## 1. íŠ¹ì •ì‹œê°„ëŒ€ì— ë…¸í‹°í”¼ì¼€ì´ì…˜ ì„¤ì •(feat. ë¡œì»¬ ë…¸í‹°ëŠ” 64ê°œê¹Œì§€!!!)

ì „ì— ë°°ì› ì§€ë§Œ... ê¸°ì–µë ¥ ì´ìŠˆë¡œ ì¸í•´ ë¡œì»¬ ë…¸í‹°í”¼ì¼€ì´ì…˜ì€ 64ê°œ ê¹Œì§€ì¸ê±¸ ì¸ì§€ ëª»í•œ ì €ëŠ” ì‚¬ìš©ìê°€ ìŠ¤ì¼€ì¥´ ë“±ë¡í•  ë•Œ ë§ˆë‹¤ ë§¤ ë²ˆ ë…¸í‹°í”¼ì¼€ì´ì…˜ì„ ì„¤ì •í•´ì£¼ê²Œí•˜ë©´ ì¢‹ê² ë‹¤... ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

<img width="200" alt="image" src="https://user-images.githubusercontent.com/92367484/194526329-8b3c8923-abe5-4879-bd34-5349a10ba618.png">

ê·¸ë˜ì„œ ë·°ë¥¼ ì´ë ‡ê²Œ ë§Œë“¤ì—ˆì£ ... 

ê·¸ë¦¬ê³  í”¼ë“œë°±ì„ ë°›ì€ í›„ì— ì¼ì • ì‹œê°„ëŒ€ì— ì•ŒëŒì„ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ë°”ê¾¸ì–´ ì£¼ì—ˆìŠµë‹ˆë‹¤...

https://user-images.githubusercontent.com/92367484/194529182-674fcd16-ecac-4fe5-993a-d9019ff0d5b5.mp4

ì´ íŒŒíŠ¸ì—ì„œ ì €ëŠ” ì‚¬ìš©ìê°€ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ê±°ë‚˜ or ì•ˆ í•´ì£¼ê±°ë‚˜ ë‘ ê°€ì§€ì— ë§¤ëª°ë˜ì–´ ê°„ë‹¨í•œ ë¶€ë¶„ì„ ë†“ì³¤ìŠµë‹ˆë‹¤.


### 1-1. ê¶Œí•œì„¤ì • ì—¬ë¶€ì—ë§Œ ì‹ ê²½ì¼ì–´ìš”...

ì²˜ìŒ ë…¸í‹°í”¼ì¼€ì´ì…˜ ì„¤ì •ì„ í•´ì¤„ ë•Œ ì €ëŠ” ë‹¹ì—°í•˜ê²Œ __ê¶Œí•œ ì„¤ì •ì´ ë˜ì–´ìˆì„ ë•Œ__ or __ê¶Œí•œì„¤ì •ì´ ë˜ì–´ìˆì§€ ì•Šì„ ë•Œ__ ì´ ë‘ê°€ì§€ë¥¼ ê°€ì§€ê³  ëª¨ë“ ê±¸ íŒë‹¨í•˜ë ¤í–ˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ê¶Œí•œì„¤ì •ì´ ë˜ì–´ìˆëŠ”ì§€ ì•ˆ ë˜ì–´ìˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ê¶Œí•œì„¤ì •ì´ trueì´ë©´ ì‹œê°„ì„¤ì •ì´ ê°€ëŠ¥í•˜ê²Œ ì•„ë‹ˆë©´ ê¶Œí•œì„¤ì • ì°½ìœ¼ë¡œ ë°”ë¡œ ì´ë™í•˜ê²Œ í•´ì£¼ëŠ” ì‹ìœ¼ë¡œ í•˜ë ¤ í–ˆìŠµë‹ˆë‹¤.

```swift
let center = UNUserNotificationCenter.current()

cetner.getNotificationCenter.current()
center.getNotificationSettings { settings in 
    switch settings.alertSetting {
        case .enabled:
            // í—ˆìš©í•œ ìƒíƒœì¼ ê²½ìš°
        default:
            // í—ˆìš©í•˜ì§€ ì•Šì€ ìƒíƒœ + ë‚˜ë¨¸ì§€ ëª¨ë“  ê²½ìš°
    }
}
```

ê·¸ëŸ¬ë©´ í‚¬ ë•ŒëŠ” ì‚¬ìš©ìê°€ ê¶Œí•œì„¤ì •ìœ¼ë¡œ ì´ë™ì´ ê°€ëŠ¥í•˜ê²Œ í•´ì¤¬ëŠ”ë° ëŒ ë•ŒëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”?

ì•± ë‚´ì—ì„œ ì‹œìŠ¤í…œì„¤ì •ì˜ ê¶Œí•œì„¤ì •ì—¬ë¶€ë¥¼ ì¡°ì •í•´ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?

ë„¤... ì´ê±¸ ëª°ëì£  ì „ ã… ã… ...

<span style="color:red">ì•± ë‚´ ì„¤ì •ìœ¼ë¡œ ì‹œìŠ¤í…œì„¤ì •ì„ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥ í•©ë‹ˆë‹¤.</span>

ê¶Œí•œì„¤ì •ì°½ ìª½ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì´ë™ë˜ê²Œ í•  ìˆ˜ëŠ” ìˆì§€ë§Œìš”.

ì²˜ìŒ ì œê°€ ìƒê°í–ˆë˜ "ì•±ë‚´ì—ì„œ ì•Œë¦¼ê¶Œí•œ ì„¤ì •ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì‚¬ìš©ìê°€ ìŠ¤ìœ„ì¹˜ë¥¼ ë„ë©´ ì‹œìŠ¤í…œ ì„¤ì •ì—ì„œì˜ ì•Œë¦¼ ê¶Œí•œì„ êº¼ì§ˆ ìˆ˜ ìˆê²Œ í•˜ë„ë¡ í•˜ì!"ëŠ” ë¶ˆê°€ëŠ¥í•œ ê²ƒì´ì˜€ì£ .


### 1-2. ê·¸ëƒ¥ ì‚­ì œí•˜ë©´ ë˜ì£ !!!

ì´ë¥¼ ì–´ë–»ê²Œ í•´ê²°í–ˆëƒë©´ ë°”ë¡œ ë…¸í‹°í”¼ì¼€ì´ì…˜ì„ ë„ë©´ ë“±ë¡ë˜ì–´ìˆëŠ” ë…¸í‹°í”¼ì¼€ì´ì…˜ì´ ëª¨ë‘ ì‚­ì œ ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ ì–´ì°Œëë˜ ì•Œë¦¼ì€ ì‚¬ìš©ìì—ê²Œ ê°€ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‹œê°„ì´ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šìœ¼ë‹ˆê¹Œìš”.

"ê·¸ëŸ¬ë©´ ì•Œë¦¼ê¶Œí•œì€ ì¼œì ¸ìˆëŠ” ìƒíƒœê°€ ì•„ë‹Œê°€ìš”?" ë¼ëŠ” ìƒê°ì„ í•  ìˆ˜ ìˆê² ì£ . ì €ë„ ê·¸ë¬ë“¯...

ë„¤ ì•Œë¦¼ ê¶Œí•œì€ ì‚¬ì‹¤ ì¼œì ¸ìˆëŠ” ìƒíƒœì¸ê±°ì£ . í•˜ì§€ë§Œ ì•Œë¦¼ì€ ë‹¤ ì‚­ì œëìœ¼ë‹ˆê¹Œ í¬ê²Œ ìƒê´€ ì—†ê² ì£ ?

ê·¸ë¦¬ê³  ì‚¬ìš©ìê°€ ì•Œë¦¼ì„ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë©´ ìŠ¤ìœ„ì¹˜ë¥¼ í‚¤ê³  ë‹¤ì‹œ ê¶Œí•œì„¤ì • ì°½ìœ¼ë¡œ ìœ ë„ë˜ëŠ”ë° ê¶Œí•œì„¤ì •ì´ ì¼œì ¸ìˆë‹¤í•˜ë”ë¼ë„ ë‹¤ì‹œ ê¶Œí•œì„ ëŒê°€ìš”?

ì•„ë‹ˆì£ . 'ì¼œì ¸ìˆêµ¬ë‚˜' í™•ì¸ë§Œí•˜ê³  ë‹¤ì‹œ ì•±ìœ¼ë¡œ ì™€ì„œ ì•Œë¦¼ ì‹œê°„ì„ ì„¤ì •í•´ì£¼ë©´ë©ë‹ˆë‹¤.

ì‚¬ì‹¤ ê¶Œí•œì„¤ì •ì´ ì¼œì ¸ìˆë“  êº¼ì ¸ìˆë“  ìœ ì € ì…ì¥ì—ì„  í¬ê²Œ ìƒê´€ì´ ì—†ê³  ì•Œë¦¼ì´ ì˜¤ëƒ ì•ˆì˜¤ëƒ ì„¤ì •ì´ ì˜ ë˜ìˆëƒ ì´ ê²ƒì´ ìœ ì €ê°€ ì‹ ê²½ì“°ëŠ” í¬ì¸íŠ¸ì¼ ê²ƒì…ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì´ì™€ê°™ì´ ì½”ë“œë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

```swift
override func viewDidLoad() {
	super.viewDidLoad()
	
	self.navigationItem.title = "ì„¤ì •"
	
	mainView.backgroundColor = .systemBackground

	// ì™œ ë¹„ë™ê¸°ë¡œí•´ì•¼í• ê¹Œ?
	notificationCenter.getPendingNotificationRequests { requests in
		if requests.isEmpty == true {
			DispatchQueue.main.async {
				self.mainView.alarmToggle.setOn(false, animated: false)
				self.mainView.setTimeButton.setTitle("ì‹œê°„ì„¤ì •", for: .normal)
			}
		} else {
			let storedTime = UserDefaults.standard.string(forKey: "settingTime")
			DispatchQueue.main.async {
				self.mainView.alarmToggle.setOn(true, animated: false)
				self.mainView.setTimeButton.setTitle(storedTime, for: .normal)
			}
		}
	}
}

// ì•ŒëŒìŠ¤ìœ„ì¹˜ í´ë¦­ì•¡ì…˜
@objc func alarmToggleClicked() {
	if mainView.alarmToggle.isOn == true {
		guard let url = URL(string: UIApplication.openSettingsURLString) else { return }
		
		if UIApplication.shared.canOpenURL(url) {
			UIApplication.shared.open(url)
		}
	} else {
		
		notificationCenter.removeAllPendingNotificationRequests()
		mainView.setTimeButton.setTitle("ì‹œê°„ì„¤ì •", for: .normal)
	}
}

// 
func sendNotification(alarmHour: Int, alarmMinute: Int) {
	UNUserNotificationCenter.current().getNotificationSettings { settings in
		if settings.authorizationStatus == UNAuthorizationStatus.authorized {

			let notiContent = UNMutableNotificationContent()
			notiContent.title = "ì‹œê°„ì´ ëì–´ìš”!"
			notiContent.subtitle = "ì¼ì–´ë‚˜ ìŠ¤ì¼€ì¥´ì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”~~"
			notiContent.sound = .defaultCritical

			var date = DateComponents()
			date.hour = alarmHour
			date.minute = alarmMinute

			let trigger = UNCalendarNotificationTrigger(dateMatching: date, repeats: true)
			let request = UNNotificationRequest(identifier: "wakeup", content: notiContent, trigger: trigger)

			UNUserNotificationCenter.current().add(request, withCompletionHandler: nil)

		} else {
			print("User not agree")
		}
	}
}

func getPendingNotificationRequests(completionHandler: ([UNNotificationRequest]) -> Void) { }
```


### 1-3. notification ì„¤ì •ì€ ì™œ ë¹„ë™ê¸°ë¡œ í•´ì•¼í• ê¹Œ?
<img width="650" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-07 á„‹á…©á„’á…® 8 03 19" src="https://user-images.githubusercontent.com/92367484/194539372-9ba684f2-ae81-46ce-b541-5d23d70d92ca.png">
`getPendingNotificationRequests` ëŠ” ë…¸í‹°í”¼ì¼€ì´ì…˜ ìš”ì²­ì´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ë¥¼ íŒë‹¨í•´ì£¼ëŠ” ë©”ì†Œë“œ ì…ë‹ˆë‹¤.

ì´ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ë…¸í‹°í”¼ì¼€ì´ì…˜ì´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ íŒë‹¨í•˜ê³  ì—†ëŠ” ê²½ìš° "ì‹œê°„ì„¤ì •"ìœ¼ë¡œ ì•„ë‹Œ ê²½ìš° ì„¤ì •ì‹œê°„ì„ UserDefaultsë¡œ ì €ì¥í•´ì„œ ìœ ì €ì˜ ì‹œê°„ì„¤ì •ì„ ì €ì¥í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

ê·¸ëŸ°ë° ì´ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ Asyncë¡œ ì²˜ë¦¬í•´ì¤˜ì•¼í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ìœ„ì™€ ê°™ì´ ë³´ë¼ìƒ‰ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ ëŒ€ì²´ ì™œ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•´ì£¼ì–´ì•¼ í• ê¹Œìš”?

<img width="650" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-07 á„‹á…©á„’á…® 9 07 37" src="https://user-images.githubusercontent.com/92367484/194554086-b9081547-12a7-4460-bda5-741d7d3871d0.png">


ë„¤  ì‚¬ìš©í•œ `getPendingNotificationRequests` ë©”ì†Œë“œê°€ async(ë¹„ë™ê¸°)ë¡œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ì™€ ê´€ë ¨ëœ ë‚´ìš©ì€ ì¶”í›„ ë¸”ë¡œê·¸ì—ì„œ ìì„¸í•˜ê²Œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.

# 220928

# 220929

# 220930

# 221001

# 221002

# 221003

# 221004


